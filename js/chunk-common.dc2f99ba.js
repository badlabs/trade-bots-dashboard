"use strict";(self["webpackChunktrade_bots_dashboard"]=self["webpackChunktrade_bots_dashboard"]||[]).push([[64],{6860:(t,e,o)=>{o.d(e,{IR:()=>u,Vb:()=>m,eC:()=>p,yY:()=>l,bH:()=>c});var n=o(9835),i=o(3260),r=o(7363),a=o(1623),s=o(1291);const l=(0,n.aZ)({computed:Object.assign(Object.assign({},(0,r.rn)(a.V,["robots"])),{robot(){const t=this.robots.find((t=>t.name===this.$route.params.robot));return t||i.n.notFound()}}),mounted(){this.robot.name.startsWith("[System]")&&(console.log(this.robot),this.$router.push({name:"NotFound"}))}}),u=(0,n.aZ)({computed:Object.assign(Object.assign({},(0,r.rn)(s.R,["algorithms","algorithmNotFound"])),{algorithm(){const t=this.algorithms.find((t=>t.algorithm.name===this.$route.params.algorithm));return t?t.algorithm:this.algorithmNotFound}}),mounted(){this.algorithm.name.startsWith("[System]")&&(console.log(this.algorithm),this.$router.push({name:"NotFound"}))}}),c=(0,n.aZ)({methods:{getDayBounds(t){const e=new Date(t);return e.setHours(0,0,0,0),{start:e,end:new Date(+e+864e5)}},getDayBoundsFromTimeRange(t){let e,o;if(t)if("string"===typeof t){const n=this.getDayBounds(new Date(t));e=n.start,o=n.end}else e=this.getDayBounds(new Date(t.from)).start,o=this.getDayBounds(new Date(t.to)).end;else{const t=this.getDayBounds(new Date);e=t.start,o=t.end}return{from:e,to:o}}}});var d=o(2049),h=o.n(d);const m=(0,n.aZ)({methods:{exportRobot(t){const e=new Blob([JSON.stringify(t.toExport(),void 0,2)],{type:"text/plain;charset=utf-8"});h().saveAs(e,`robot-${t.name}-config.json`)}}}),p=(0,n.aZ)({methods:{exportRobots(t){const e=new Blob([JSON.stringify(t.map((t=>t.toExport())),void 0,2)],{type:"text/plain;charset=utf-8"});h().saveAs(e,"robots-config.json")}}})},3260:(t,e,o)=>{o.d(e,{n:()=>n});class n{constructor({name:t,host:e,port:o,token:n}){this.status="Disconnected",this.name=t,this.host=e,this.port=o,this.token=n}static notFound(){return new n({name:"[System] Not Found",host:"",port:0,token:""})}get url(){return`http://${this.host}:${this.port}`}get authHeader(){return{Authorization:`Bearer ${this.token}`}}toExport(){return{name:this.name,host:this.host,port:this.port,token:this.token}}}},1291:(t,e,o)=>{o.d(e,{R:()=>s});var n=o(7363),i=o(9981),r=o.n(i),a=function(t,e,o,n){function i(t){return t instanceof o?t:new o((function(e){e(t)}))}return new(o||(o=Promise))((function(o,r){function a(t){try{l(n.next(t))}catch(e){r(e)}}function s(t){try{l(n["throw"](t))}catch(e){r(e)}}function l(t){t.done?o(t.value):i(t.value).then(a,s)}l((n=n.apply(t,e||[])).next())}))};const s=(0,n.Q_)("algorithmsStore",{state:()=>({algorithms:[]}),getters:{algorithmNotFound(){return{name:"[System] Not Found",input_types:JSON.stringify({}),description:""}}},actions:{addAlgorithm(t,e){if(this.algorithms.some((t=>t.algorithm.name===e.name))){const o=this.algorithms.find((t=>t.algorithm.name===e.name));if(!o)return;o.robots.some((e=>e.name===t.name))||o.robots.push(t)}else this.algorithms.push({algorithm:e,robots:[t]})},getRobotsByAlgorithm(t){var e;return(null===(e=this.algorithms.find((e=>e.algorithm.name===t)))||void 0===e?void 0:e.robots)||[]},getAlgorithms(t){return a(this,void 0,void 0,(function*(){const{data:e}=yield r().get(`${t.url}/api/algos`,{headers:t.authHeader});for(let o of e)this.addAlgorithm(t,o);return e}))},getAlgorithmRuns(t,e){return a(this,void 0,void 0,(function*(){const{data:o}=yield r().get(`${t.url}/api/algos/${e}/runs`,{headers:t.authHeader});return o}))},runAlgorithm(t,e,o){return a(this,void 0,void 0,(function*(){const{data:n}=yield r().post(`${t.url}/api/algos/${e}`,o,{headers:t.authHeader});return n}))},runAlgorithmForActiveRobots(t,e){return a(this,void 0,void 0,(function*(){const o=this.getRobotsByAlgorithm(t).filter((t=>"Active"===t.status)),n=o.map((o=>a(this,void 0,void 0,(function*(){try{return yield this.runAlgorithm(o,t,e),{robot:o,success:!0}}catch(n){return{robot:o,success:!1}}})))),i=yield Promise.all(n),r={success:[],failure:[]};return i.forEach((t=>{t.success?r.success.push(t.robot):r.failure.push(t.robot)})),r}))},stopAlgorithm(t,e,o){return a(this,void 0,void 0,(function*(){const{data:n}=yield r().post(`${t.url}/api/algos/${e}/stop/${o}`,{},{headers:t.authHeader});return n}))},continueAlgorithm(t,e,o){return a(this,void 0,void 0,(function*(){const{data:n}=yield r().post(`${t.url}/api/algos/${e}/continue/${o}`,{},{headers:t.authHeader});return n}))},getAlgorithmInputsTypes(t){return JSON.parse(t.input_types)}}})},3043:(t,e,o)=>{o.d(e,{a:()=>l});var n=o(7363),i=o(1623),r=o(9981),a=o.n(r),s=function(t,e,o,n){function i(t){return t instanceof o?t:new o((function(e){e(t)}))}return new(o||(o=Promise))((function(o,r){function a(t){try{l(n.next(t))}catch(e){r(e)}}function s(t){try{l(n["throw"](t))}catch(e){r(e)}}function l(t){t.done?o(t.value):i(t.value).then(a,s)}l((n=n.apply(t,e||[])).next())}))};const l=(0,n.Q_)("portfolioActions",{state:()=>({}),getters:{},actions:{getPortfolio(t){return s(this,void 0,void 0,(function*(){const{data:e}=yield a().get(`${t.url}/api/state/portfolio`,{headers:t.authHeader});return e}))},getCurrenciesBalance(t){return s(this,void 0,void 0,(function*(){const{data:e}=yield a().get(`${t.url}/api/state/currencies/balance`,{headers:t.authHeader});return e}))},updatePortfolio(t){return s(this,void 0,void 0,(function*(){const{data:e}=yield a().post(`${t.url}/api/state/portfolio`,{},{headers:t.authHeader});return e}))},getAverageBuyPrice(t,e){return s(this,void 0,void 0,(function*(){const{data:o}=yield a().get(`${t.url}/api/state/portfolio/${e}/average-buy-price`,{headers:t.authHeader});return o}))},getUnitedPortfolio(){return s(this,void 0,void 0,(function*(){const t=(0,i.V)(),e=t.robots,o=e.map((t=>s(this,void 0,void 0,(function*(){try{return yield this.getPortfolio(t)}catch(e){return[]}})))),n=yield Promise.all(o),r=n.reduce(((t,e)=>(e.forEach((e=>{const o=t.find((t=>t.security_ticker==e.security_ticker));o?o.amount+=e.amount:t.push(e)})),t)),[]);return r}))},getUnitedBalance(){return s(this,void 0,void 0,(function*(){const t=(0,i.V)(),e=t.robots,o=e.map((t=>s(this,void 0,void 0,(function*(){try{return yield this.getCurrenciesBalance(t)}catch(e){return[]}})))),n=yield Promise.all(o),r=n.reduce(((t,e)=>(e.forEach((e=>{const o=t.find((t=>t.currency_ticker==e.currency_ticker));o?o.balance+=e.balance:t.push(e)})),t)),[]);return r}))}}})},1354:(t,e,o)=>{o.d(e,{R:()=>l});var n=o(7363),i=o(7898),r=o(9981),a=o.n(r),s=function(t,e,o,n){function i(t){return t instanceof o?t:new o((function(e){e(t)}))}return new(o||(o=Promise))((function(o,r){function a(t){try{l(n.next(t))}catch(e){r(e)}}function s(t){try{l(n["throw"](t))}catch(e){r(e)}}function l(t){t.done?o(t.value):i(t.value).then(a,s)}l((n=n.apply(t,e||[])).next())}))};const l=(0,n.Q_)("robotActions",{state:()=>({}),getters:{},actions:{getSecurities(t){return s(this,void 0,void 0,(function*(){const e=(0,i.$)(),{data:o}=yield a().get(`${t.url}/api/state/securities`,{headers:t.authHeader});return e.updateSecuritiesStore(o),o}))},updateSecurities(t){return s(this,void 0,void 0,(function*(){const e=(0,i.$)(),{data:o}=yield a().post(`${t.url}/api/state/securities`,{},{headers:t.authHeader});return e.updateSecuritiesStore(o),o}))},getCurrencies(t){return s(this,void 0,void 0,(function*(){const{data:e}=yield a().get(`${t.url}/api/state/currencies`,{headers:t.authHeader});return e}))},updateCurrencies(t){return s(this,void 0,void 0,(function*(){const{data:e}=yield a().post(`${t.url}/api/state/currencies`,{},{headers:t.authHeader});return e}))}}})},1623:(t,e,o)=>{o.d(e,{V:()=>d});var n=o(7363),i=o(3260),r=o(9981),a=o.n(r),s=o(1354),l=o(3043),u=o(1291),c=function(t,e,o,n){function i(t){return t instanceof o?t:new o((function(e){e(t)}))}return new(o||(o=Promise))((function(o,r){function a(t){try{l(n.next(t))}catch(e){r(e)}}function s(t){try{l(n["throw"](t))}catch(e){r(e)}}function l(t){t.done?o(t.value):i(t.value).then(a,s)}l((n=n.apply(t,e||[])).next())}))};const d=(0,n.Q_)("robots",{state:()=>({robots:[]}),getters:{},actions:{checkRobotAuth(t){return c(this,void 0,void 0,(function*(){try{const e=new i.n(t),{data:o}=yield a().get(`${e.url}/api/auth/check`,{headers:e.authHeader});return o.auth}catch(e){return!1}}))},updateRobotStatus(t){return c(this,void 0,void 0,(function*(){try{const{data:e}=yield a().get(`${t.url}/api/auth/check`,{headers:t.authHeader});return e.auth?(t.status="Active",t):(t.status="Not Authorized",t)}catch(e){return t.status="Disconnected",t}}))},addRobot(t){return c(this,void 0,void 0,(function*(){const e=(0,s.R)(),o=(0,l.a)(),n=(0,u.R)();if(!this.checkExistingRobot(t)){this.robots.push(new i.n(t));const r=this.robots.find((e=>e.url===new i.n(t).url));r&&(yield e.updateSecurities(r),yield o.updatePortfolio(r),yield n.getAlgorithms(r),yield this.updateRobotStatus(r))}}))},checkExistingRobot(t){const e=new i.n(t);return this.robots.some((t=>t.url===e.url))}}})},7898:(t,e,o)=>{o.d(e,{$:()=>i});var n=o(7363);const i=(0,n.Q_)("securities",{state:()=>({securities:[]}),getters:{},actions:{updateSecuritiesStore(t){t.forEach((t=>{const e=this.securities.find((e=>e.ticker===t.ticker));e?e.price=t.price:this.securities.push(t)}))},getSecurity(t){return this.securities.find((e=>e.ticker===t))}}})},9416:(t,e,o)=>{o.d(e,{Z:()=>U});var n=o(9835),i=o(1957);const r=(0,n.Uk)(" Connect robot "),a=(0,n.Uk)("Close"),s=(0,n.Uk)(" Check "),l=(0,n.Uk)("Connect");function u(t,e,o,u,c,d){const h=(0,n.up)("q-icon"),m=(0,n.up)("q-space"),p=(0,n.up)("q-tooltip"),g=(0,n.up)("q-btn"),b=(0,n.up)("q-bar"),f=(0,n.up)("q-input"),w=(0,n.up)("q-card-section"),y=(0,n.up)("q-file"),v=(0,n.up)("q-btn-group"),k=(0,n.up)("q-card-actions"),_=(0,n.up)("q-form"),Z=(0,n.up)("q-card"),q=(0,n.up)("q-dialog"),x=(0,n.Q2)("close-popup");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(q,{modelValue:t.show,"onUpdate:modelValue":e[4]||(e[4]=e=>t.show=e),persistent:""},{default:(0,n.w5)((()=>[(0,n.Wm)(Z,{style:{"min-width":"400px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{class:"bg-primary text-white"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{name:"precision_manufacturing"}),r,(0,n.Wm)(m),(0,n.wy)(((0,n.wg)(),(0,n.j4)(g,{dense:"",flat:"",icon:"close"},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{class:"bg-white text-primary"},{default:(0,n.w5)((()=>[a])),_:1})])),_:1})),[[x]])])),_:1}),(0,n.Wm)(_,{onSubmit:(0,i.iM)(t.checkRobot,["prevent"]),loading:t.loading},{default:(0,n.w5)((()=>[(0,n.Wm)(w,null,{default:(0,n.w5)((()=>[(0,n.Wm)(f,{modelValue:t.robotOptions.name,"onUpdate:modelValue":e[0]||(e[0]=e=>t.robotOptions.name=e),label:"Name*"},null,8,["modelValue"]),(0,n.Wm)(f,{modelValue:t.robotOptions.host,"onUpdate:modelValue":e[1]||(e[1]=e=>t.robotOptions.host=e),label:"Host*"},null,8,["modelValue"]),(0,n.Wm)(f,{modelValue:t.robotOptions.port,"onUpdate:modelValue":e[2]||(e[2]=e=>t.robotOptions.port=e),type:"number",label:"Port*"},null,8,["modelValue"]),(0,n.Wm)(f,{modelValue:t.robotOptions.token,"onUpdate:modelValue":e[3]||(e[3]=e=>t.robotOptions.token=e),label:"Token"},null,8,["modelValue"])])),_:1}),(0,n.Wm)(k,{align:"right"},{default:(0,n.w5)((()=>[(0,n.Wm)(v,null,{default:(0,n.w5)((()=>[(0,n.Wm)(y,{color:"primary",accept:".json",label:"IMPORT","max-files":1,"onUpdate:modelValue":t.setImportedSettings,dense:""},{prepend:(0,n.w5)((()=>[(0,n.Wm)(h,{name:"file_download"})])),_:1},8,["onUpdate:modelValue"]),(0,n.Wm)(g,{color:"success"===t.checkStatus?"green":"error"===t.checkStatus?"red":"primary",icon:"success"===t.checkStatus?"check_box":"error"===t.checkStatus?"error":"check_box_outline_blank",type:"submit",loading:t.loading},{default:(0,n.w5)((()=>[s])),_:1},8,["color","icon","loading"]),(0,n.Wm)(g,{color:"primary",onClick:t.connectRobot,loading:t.loading,icon:"share",disable:"success"!==t.checkStatus},{default:(0,n.w5)((()=>[l])),_:1},8,["onClick","loading","disable"])])),_:1})])),_:1})])),_:1},8,["onSubmit","loading"])])),_:1})])),_:1},8,["modelValue"]),(0,n.Wm)(g,{onClick:e[5]||(e[5]=e=>t.show=!t.show),loading:t.loading,color:"accent",icon:"add",label:"Connect New Robot"},null,8,["loading"])],64)}var c=o(1623),d=o(7363),h=function(t,e,o,n){function i(t){return t instanceof o?t:new o((function(e){e(t)}))}return new(o||(o=Promise))((function(o,r){function a(t){try{l(n.next(t))}catch(e){r(e)}}function s(t){try{l(n["throw"](t))}catch(e){r(e)}}function l(t){t.done?o(t.value):i(t.value).then(a,s)}l((n=n.apply(t,e||[])).next())}))};const m=(0,n.aZ)({name:"ConnectRobotModal",emits:["addRobot","robotAdded"],data(){return{show:!1,loading:!1,checkStatus:null,robotOptions:{name:"",host:"localhost",token:"",port:4268}}},methods:Object.assign(Object.assign({},(0,d.nv)(c.V,["checkRobotAuth","addRobot"])),{setImportedSettings(t){return h(this,void 0,void 0,(function*(){const e=JSON.parse(yield t.text());this.robotOptions.name=e.name,this.robotOptions.host=e.host,this.robotOptions.token=e.token,this.robotOptions.port=e.port,console.log(e)}))},checkRobot(){return h(this,void 0,void 0,(function*(){this.loading=!0,(yield this.checkRobotAuth(this.robotOptions))?this.checkStatus="success":this.checkStatus="error",this.loading=!1}))},connectRobot(){return h(this,void 0,void 0,(function*(){this.loading=!0,this.$emit("addRobot"),this.addRobot(this.robotOptions).then((()=>{this.$emit("robotAdded"),this.loading=!1})),this.robotOptions={name:"",host:"localhost",token:"",port:4268},this.checkStatus=null,this.show=!1}))}})});var p=o(1639),g=o(7743),b=o(4458),f=o(4526),w=o(2857),y=o(136),v=o(8879),k=o(6858),_=o(8326),Z=o(3190),q=o(3119),x=o(1821),V=o(7236),W=o(3837),R=o(2146),Q=o(9984),S=o.n(Q);const A=(0,p.Z)(m,[["render",u]]),U=A;S()(m,"components",{QDialog:g.Z,QCard:b.Z,QBar:f.Z,QIcon:w.Z,QSpace:y.Z,QBtn:v.Z,QTooltip:k.Z,QForm:_.Z,QCardSection:Z.Z,QInput:q.Z,QCardActions:x.Z,QBtnGroup:V.Z,QFile:W.Z}),S()(m,"directives",{ClosePopup:R.Z})},6442:(t,e,o)=>{o.d(e,{Z:()=>Q});var n=o(9835),i=o(6970);const r=(0,n.Uk)(" Import robots "),a=(0,n.Uk)("Close"),s={key:0},l=(0,n.Uk)("Connect");function u(t,e,o,u,c,d){const h=(0,n.up)("q-icon"),m=(0,n.up)("q-space"),p=(0,n.up)("q-tooltip"),g=(0,n.up)("q-btn"),b=(0,n.up)("q-bar"),f=(0,n.up)("q-file"),w=(0,n.up)("q-card-section"),y=(0,n.up)("q-card-actions"),v=(0,n.up)("q-card"),k=(0,n.up)("q-dialog"),_=(0,n.Q2)("close-popup");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(k,{modelValue:t.show,"onUpdate:modelValue":e[0]||(e[0]=e=>t.show=e),persistent:""},{default:(0,n.w5)((()=>[(0,n.Wm)(v,{style:{"min-width":"400px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{class:"bg-primary text-white"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{name:"precision_manufacturing"}),r,(0,n.Wm)(m),(0,n.wy)(((0,n.wg)(),(0,n.j4)(g,{dense:"",flat:"",icon:"close"},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{class:"bg-white text-primary"},{default:(0,n.w5)((()=>[a])),_:1})])),_:1})),[[_]])])),_:1}),(0,n.Wm)(w,null,{default:(0,n.w5)((()=>[(0,n.Wm)(f,{color:"primary",accept:".json",label:"Upload setting file","max-files":1,"onUpdate:modelValue":t.readSettings,outlined:"",loading:t.loading},{prepend:(0,n.w5)((()=>[(0,n.Wm)(h,{name:"file_download"})])),_:1},8,["onUpdate:modelValue","loading"]),t.settings.length?((0,n.wg)(),(0,n.iD)("div",s,[(0,n._)("div",null,"Found "+(0,i.zw)(t.settings.length)+" configurations for robots.",1),(0,n._)("div",null,(0,i.zw)(t.newRobotsCount())+" robots will be added.",1)])):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(y,{align:"right"},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{color:"primary",onClick:t.connectRobots,loading:t.loading,icon:"share",disable:!t.settings.length},{default:(0,n.w5)((()=>[l])),_:1},8,["onClick","loading","disable"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,n.Wm)(g,{onClick:e[1]||(e[1]=e=>t.show=!t.show),loading:t.loading,color:"accent",icon:"file_download",label:"Import Robots"},null,8,["loading"])],64)}var c=o(7363),d=o(1623),h=function(t,e,o,n){function i(t){return t instanceof o?t:new o((function(e){e(t)}))}return new(o||(o=Promise))((function(o,r){function a(t){try{l(n.next(t))}catch(e){r(e)}}function s(t){try{l(n["throw"](t))}catch(e){r(e)}}function l(t){t.done?o(t.value):i(t.value).then(a,s)}l((n=n.apply(t,e||[])).next())}))};const m=(0,n.aZ)({name:"ImportRobotsModal",emits:["addRobots","robotsAdded"],data(){return{show:!1,settings:[],loading:!1}},computed:{},methods:Object.assign(Object.assign({},(0,c.nv)(d.V,["checkExistingRobot","addRobot"])),{readSettings(t){return h(this,void 0,void 0,(function*(){this.settings=JSON.parse(yield t.text())}))},connectRobots(){return h(this,void 0,void 0,(function*(){this.loading=!0,this.show=!1,this.$emit("addRobots");const t=this.settings.map((t=>h(this,void 0,void 0,(function*(){try{yield this.addRobot(t)}catch(e){}}))));yield Promise.all(t),this.$emit("robotsAdded"),this.loading=!1}))},newRobotsCount(){return this.settings.filter((t=>!this.checkExistingRobot(t))).length}})});var p=o(1639),g=o(7743),b=o(4458),f=o(4526),w=o(2857),y=o(136),v=o(8879),k=o(6858),_=o(3190),Z=o(3837),q=o(1821),x=o(2146),V=o(9984),W=o.n(V);const R=(0,p.Z)(m,[["render",u]]),Q=R;W()(m,"components",{QDialog:g.Z,QCard:b.Z,QBar:f.Z,QIcon:w.Z,QSpace:y.Z,QBtn:v.Z,QTooltip:k.Z,QCardSection:_.Z,QFile:Z.Z,QCardActions:q.Z}),W()(m,"directives",{ClosePopup:x.Z})},4835:(t,e,o)=>{o.d(e,{Z:()=>p});var n=o(9835),i=o(6970);const r=["innerHTML"];function a(t,e,o,a,s,l){return(0,n.wg)(),(0,n.iD)("pre",{class:"bg-black text-white q-pa-md",style:(0,i.j5)([{"overflow-wrap":"break-word","max-width":"100%"},{whiteSpace:t.singleLine?"pre-wrap":"pre-line"}]),innerHTML:t.singleLine?t.lastLine:t.logs},null,12,r)}var s=o(3819),l=o(3260),u=o(7363),c=o(1623);const d=(0,n.aZ)({name:"RobotLogs",props:{robot:{type:l.n,required:!1},singleLine:{type:Boolean,required:!1}},data(){return{connection:null,connections:[],logs:""}},methods:Object.assign(Object.assign({},(0,u.nv)(c.V,["updateRobotStatus"])),{jsonReplacer(t){return t},highlightSyntax(t){const e=/^(\d{2}\.\d{2}\.\d{4},\s\d{2}:\d{2}:\d{2})/gm,o=/\s(\[[\w_\-]*:\d*])\s/gim,n=/\{(.*)\}/gm;return t.replace(e,'<i class="text-warning" >$1</i>').replace(o,'<span class="text-accent" > $1 </span>').replace(n,'<span class="text-secondary" >{$1}</span>')}}),computed:Object.assign(Object.assign({},(0,u.rn)(c.V,["robots"])),{lastLine(){return this.logs.split("\n").slice(-2)[0]},longestRobotNameLength(){return Math.max(...this.robots.map((t=>t.name.length)))}}),created(){if(this.robot){const t=`${this.robot.url}`;this.connection=(0,s.io)(t,{extraHeaders:this.robot.authHeader}),this.connection.on("log",(t=>{this.logs+=`${this.highlightSyntax(t)}\n`})),this.connection.on("connect",(()=>{this.robot&&this.updateRobotStatus(this.robot)})),this.connection.on("connect_error",(()=>{this.robot&&this.updateRobotStatus(this.robot)})),this.connection.on("disconnect",(t=>{this.robot&&(this.logs+=this.robot.name+" was disconnected: "+t+"\n",this.updateRobotStatus(this.robot))}))}else this.connections=this.robots.map((t=>{const e=`${t.url}`,o=(0,s.io)(e,{extraHeaders:t.authHeader});return o.on("log",(e=>{1===e.split("\n").length&&(this.logs+=`<i class="text-primary">${t.name+"&nbsp;".repeat(this.longestRobotNameLength-t.name.length)}</i> | ${this.highlightSyntax(e)}\n`)})),o.on("connect",(()=>{this.logs+=`<i class="text-primary">${t.name}</i> connected\n`,this.updateRobotStatus(t)})),o.on("connect_error",(()=>{this.updateRobotStatus(t)})),o.on("disconnect",(e=>{this.logs+=`<i class="text-primary">${t.name}</i>  was disconnected: ${e}\n`,this.updateRobotStatus(t)})),o}))},beforeUnmount(){var t;null===(t=this.connection)||void 0===t||t.close(),this.connections.forEach((t=>t.close()))}});var h=o(1639);const m=(0,h.Z)(d,[["render",a]]),p=m},3256:(t,e,o)=>{o.d(e,{Z:()=>q});var n=o(9835),i=o(6970);const r=(0,n.Uk)("Minimize"),a=(0,n.Uk)("Maximize"),s=(0,n.Uk)("Close");function l(t,e,o,l,u,c){const d=(0,n.up)("q-icon"),h=(0,n.up)("q-space"),m=(0,n.up)("q-tooltip"),p=(0,n.up)("q-btn"),g=(0,n.up)("q-bar"),b=(0,n.up)("RobotLogs"),f=(0,n.up)("q-card"),w=(0,n.up)("q-dialog"),y=(0,n.Q2)("close-popup");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(w,{modelValue:t.show,"onUpdate:modelValue":e[2]||(e[2]=e=>t.show=e),persistent:"",maximized:t.maximizedToggle,"transition-show":"slide-up","transition-hide":"slide-down"},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{style:(0,i.j5)({maxHeight:t.maximizedToggle?void 0:"50vh"}),class:"bg-black text-white"},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{class:"bg-primary"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{name:"notes"}),(0,n.Uk)(" Logs "+(0,i.zw)(t.robot?t.robot.name:"")+" ",1),(0,n.Wm)(h),(0,n.Wm)(p,{dense:"",flat:"",icon:"minimize",onClick:e[0]||(e[0]=e=>t.maximizedToggle=!1),disable:!t.maximizedToggle},{default:(0,n.w5)((()=>[t.maximizedToggle?((0,n.wg)(),(0,n.j4)(m,{key:0,class:"bg-white text-primary"},{default:(0,n.w5)((()=>[r])),_:1})):(0,n.kq)("",!0)])),_:1},8,["disable"]),(0,n.Wm)(p,{dense:"",flat:"",icon:"crop_square",onClick:e[1]||(e[1]=e=>t.maximizedToggle=!0),disable:t.maximizedToggle},{default:(0,n.w5)((()=>[t.maximizedToggle?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(m,{key:0,class:"bg-white text-primary"},{default:(0,n.w5)((()=>[a])),_:1}))])),_:1},8,["disable"]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(p,{dense:"",flat:"",icon:"close"},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{class:"bg-white text-primary"},{default:(0,n.w5)((()=>[s])),_:1})])),_:1})),[[y]])])),_:1}),(0,n._)("div",{style:(0,i.j5)([{maxHeight:t.maximizedToggle?"calc(100vh - 32px)":"calc(50vh - 32px)"},{"overflow-y":"auto"}])},[(0,n.Wm)(b,{robot:t.robot},null,8,["robot"])],4)])),_:1},8,["style"])])),_:1},8,["modelValue","maximized"]),(0,n.Wm)(p,{onClick:e[3]||(e[3]=e=>t.show=!t.show),color:"primary"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{name:"notes"}),(0,n.Uk)(" "+(0,i.zw)(t.robot?"":"United")+" Logs ",1)])),_:1})],64)}var u=o(3260),c=o(4835);const d=(0,n.aZ)({name:"RobotLogsModal",components:{RobotLogs:c.Z},props:{robot:{type:u.n,required:!1}},data(){return{show:!1,maximizedToggle:!0}}});var h=o(1639),m=o(7743),p=o(4458),g=o(4526),b=o(2857),f=o(136),w=o(8879),y=o(6858),v=o(2146),k=o(9984),_=o.n(k);const Z=(0,h.Z)(d,[["render",l]]),q=Z;_()(d,"components",{QDialog:m.Z,QCard:p.Z,QBar:g.Z,QIcon:b.Z,QSpace:f.Z,QBtn:w.Z,QTooltip:y.Z}),_()(d,"directives",{ClosePopup:v.Z})},3706:(t,e,o)=>{o.d(e,{Z:()=>ht});var n=o(9835);const i=(0,n.Uk)(" Algorithms ");function r(t,e,o,r,a,s){const l=(0,n.up)("q-card-section"),u=(0,n.up)("AlgorithmItem"),c=(0,n.up)("q-list"),d=(0,n.up)("q-spinner-ball"),h=(0,n.up)("q-inner-loading"),m=(0,n.up)("q-card");return(0,n.wg)(),(0,n.j4)(m,{class:"q-pa-md q-my-lg q-mx-auto",style:{"max-width":"800px",background:"lightblue","border-radius":"5px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{class:"text-h3"},{default:(0,n.w5)((()=>[i])),_:1}),(0,n.Wm)(c,{style:{"max-height":"70vh","overflow-y":"auto"},separator:""},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.algorithms,((e,o)=>((0,n.wg)(),(0,n.j4)(u,{key:o,robot:t.robot,algorithm:e,dense:""},null,8,["robot","algorithm"])))),128))])),_:1}),(0,n.Wm)(h,{showing:t.loading},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{size:"50px",color:"primary"})])),_:1},8,["showing"])])),_:1})}var a=o(3260),s=o(6970);const l=(0,n.Uk)("Algorithm "),u={key:0},c=(0,n.Uk)(" Active robots: ");function d(t,e,o,i,r,a){const d=(0,n.up)("q-card-section"),h=(0,n.up)("RobotAvatar"),m=(0,n.up)("q-chip"),p=(0,n.up)("router-link"),g=(0,n.up)("q-item-section"),b=(0,n.up)("q-item-label"),f=(0,n.up)("q-item"),w=(0,n.up)("q-list"),y=(0,n.up)("q-btn"),v=(0,n.up)("RunAlgoModal"),k=(0,n.up)("q-card-actions"),_=(0,n.up)("q-card");return(0,n.wg)(),(0,n.j4)(f,{dense:""},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{class:"q-pa-sm q-my-sm"},{default:(0,n.w5)((()=>[(0,n.Wm)(_,{class:"my-card"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{class:"text-h5"},{default:(0,n.w5)((()=>[l,(0,n._)("code",null,(0,s.zw)(t.algorithm.name),1)])),_:1}),(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.algorithm.description.split("\n"),((t,e)=>((0,n.wg)(),(0,n.iD)("p",{key:e},(0,s.zw)(t),1)))),128)),t.robot?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",u,[c,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.activeRobots,(t=>((0,n.wg)(),(0,n.j4)(p,{key:t.name,class:"no-text-decoration",to:`/robots/${t.name}`},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{square:"",dark:"",color:"primary"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{name:t.name},null,8,["name"]),(0,n.Uk)(" "+(0,s.zw)(t.name),1)])),_:2},1024)])),_:2},1032,["to"])))),128))]))])),_:1}),(0,n.Wm)(w,{separator:"",class:"bg-white"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.inputs,((t,e)=>((0,n.wg)(),(0,n.j4)(f,{key:e},{default:(0,n.w5)((()=>[(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(e),1)])),_:2},1024),(0,n.Wm)(b,null,{default:(0,n.w5)((()=>[(0,n.Wm)(m,{class:"font-monospace"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(t),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),(0,n.Wm)(k,{align:"right"},{default:(0,n.w5)((()=>[t.robot?((0,n.wg)(),(0,n.j4)(y,{key:0,color:"primary",to:`/robots/${t.robot.name}/algorithms/${t.algorithm.name}`,label:"Runs",icon:"playlist_play"},null,8,["to"])):(0,n.kq)("",!0),(0,n.Wm)(v,{robot:t.robot,algorithm:t.algorithm},null,8,["robot","algorithm"])])),_:1})])),_:1})])),_:1})])),_:1})}var h=o(1957);const m={class:"q-ma-md"},p=(0,n.Uk)(" Run algorithm "),g={key:0},b=(0,n.Uk)("for "),f=(0,n.Uk)("Cancel");function w(t,e,o,i,r,a){const l=(0,n.up)("q-bar"),u=(0,n.up)("q-input"),c=(0,n.up)("OrderOptionsInput"),d=(0,n.up)("DateTimeInput"),w=(0,n.up)("q-card-section"),y=(0,n.up)("q-icon"),v=(0,n.up)("q-btn"),k=(0,n.up)("q-card-actions"),_=(0,n.up)("q-form"),Z=(0,n.up)("q-card"),q=(0,n.up)("q-dialog");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(q,{modelValue:t.show,"onUpdate:modelValue":e[1]||(e[1]=e=>t.show=e),persistent:""},{default:(0,n.w5)((()=>[(0,n.Wm)(Z,{style:{"min-width":"400px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{class:"bg-primary text-white"},{default:(0,n.w5)((()=>[(0,n._)("div",m,[p,(0,n._)("code",null,(0,s.zw)(t.algorithm.name),1),t.robot?((0,n.wg)(),(0,n.iD)("span",g,[b,(0,n._)("code",null,(0,s.zw)(t.robot.name),1)])):(0,n.kq)("",!0)])])),_:1}),(0,n.Wm)(_,{onSubmit:(0,h.iM)(t.startAlgo,["prevent"])},{default:(0,n.w5)((()=>[(0,n.Wm)(w,null,{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.fields,(t=>((0,n.wg)(),(0,n.iD)("div",{key:t.name},["number"===t.type?((0,n.wg)(),(0,n.j4)(u,{key:0,modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,modelModifiers:{number:!0},type:"number",label:t.name},null,8,["modelValue","onUpdate:modelValue","label"])):"OrderDetails"===t.type?((0,n.wg)(),(0,n.j4)(c,{key:1,modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,label:t.name},null,8,["modelValue","onUpdate:modelValue","label"])):"string"===t.type?((0,n.wg)(),(0,n.j4)(u,{key:2,modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,label:t.name},null,8,["modelValue","onUpdate:modelValue","label"])):"Date"===t.type?((0,n.wg)(),(0,n.j4)(d,{key:3,modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,label:t.name},null,8,["modelValue","onUpdate:modelValue","label"])):(0,n.kq)("",!0)])))),128))])),_:1}),(0,n.Wm)(k,{align:"right"},{default:(0,n.w5)((()=>[(0,n.Wm)(v,{color:"primary",type:"submit",loading:t.loading},{default:(0,n.w5)((()=>[(0,n.Wm)(y,{name:"play_arrow"}),(0,n.Uk)(" Start "+(0,s.zw)(t.robot?"":`for ${t.robots.length} robots`),1)])),_:1},8,["loading"]),(0,n.Wm)(v,{color:"red",onClick:e[0]||(e[0]=e=>t.show=!t.show)},{default:(0,n.w5)((()=>[f])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"]),(0,n.Wm)(v,{onClick:e[2]||(e[2]=e=>t.show=!t.show),color:"primary"},{default:(0,n.w5)((()=>[(0,n.Wm)(y,{name:"play_arrow"}),(0,n.Uk)(" Run "+(0,s.zw)(t.robot?"":`for ${t.robots.length} robots`),1)])),_:1})],64)}function y(t,e,o,i,r,a){const l=(0,n.up)("q-input"),u=(0,n.up)("q-select"),c=(0,n.up)("q-card-section"),d=(0,n.up)("q-card");return(0,n.wg)(),(0,n.j4)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,{class:"row justify-between"},{default:(0,n.w5)((()=>[(0,n._)("div",null,(0,s.zw)(t.label||"OrderDetails"),1),(0,n._)("div",null,[(0,n.Wm)(l,{modelValue:t.currentValue.ticker,"onUpdate:modelValue":e[0]||(e[0]=e=>t.currentValue.ticker=e),label:"Ticker",onInput:t.input},null,8,["modelValue","onInput"]),(0,n.Wm)(u,{modelValue:t.currentValue.operation,"onUpdate:modelValue":e[1]||(e[1]=e=>t.currentValue.operation=e),options:t.operationTypes,label:"Operation",onInput:t.input},null,8,["modelValue","options","onInput"]),(0,n.Wm)(l,{modelValue:t.currentValue.price,"onUpdate:modelValue":e[2]||(e[2]=e=>t.currentValue.price=e),modelModifiers:{number:!0},type:"number",label:"Price",onInput:t.input},null,8,["modelValue","onInput"]),(0,n.Wm)(l,{modelValue:t.currentValue.lots,"onUpdate:modelValue":e[3]||(e[3]=e=>t.currentValue.lots=e),modelModifiers:{number:!0},type:"number",label:"Lots",onInput:t.input},null,8,["modelValue","onInput"])])])),_:1})])),_:1})}const v=(0,n.aZ)({name:"OrderOptionsInput",props:{label:String,modelValue:{type:Object,required:!0}},data(){return{currentValue:this.modelValue,operationTypes:["limit_buy","limit_sell","market_buy","market_sell","buy_or_cancel","sell_or_cancel"]}},methods:{input(){this.$emit("update:modelValue",this.currentValue)},onValueChange(t){this.currentValue=t,this.input()}},watch:{value(t){this.onValueChange(t)}}});var k=o(1639),_=o(4458),Z=o(3190),q=o(3119),x=o(6384),V=o(9984),W=o.n(V);const R=(0,k.Z)(v,[["render",y]]),Q=R;W()(v,"components",{QCard:_.Z,QCardSection:Z.Z,QInput:q.Z,QSelect:x.Z});var S=o(7363),A=o(1291);const U={class:"row items-center justify-end"},C={class:"row items-center justify-end"};function j(t,e,o,i,r,a){const s=(0,n.up)("q-btn"),l=(0,n.up)("q-date"),u=(0,n.up)("q-popup-proxy"),c=(0,n.up)("q-icon"),d=(0,n.up)("q-time"),h=(0,n.up)("q-input"),m=(0,n.Q2)("close-popup");return(0,n.wg)(),(0,n.j4)(h,{modelValue:t.date,"onUpdate:modelValue":e[2]||(e[2]=e=>t.date=e),label:t.label},{prepend:(0,n.w5)((()=>[(0,n.Wm)(c,{name:"event",class:"cursor-pointer"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{modelValue:t.date,"onUpdate:modelValue":e[0]||(e[0]=e=>t.date=e),mask:"YYYY-MM-DD HH:mm"},{default:(0,n.w5)((()=>[(0,n._)("div",U,[(0,n.wy)((0,n.Wm)(s,{label:"Close",color:"primary",flat:""},null,512),[[m]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),append:(0,n.w5)((()=>[(0,n.Wm)(c,{name:"access_time",class:"cursor-pointer"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{modelValue:t.date,"onUpdate:modelValue":e[1]||(e[1]=e=>t.date=e),mask:"YYYY-MM-DD HH:mm",format24h:""},{default:(0,n.w5)((()=>[(0,n._)("div",C,[(0,n.wy)((0,n.Wm)(s,{label:"Close",color:"primary",flat:""},null,512),[[m]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue","label"])}const O=(0,n.aZ)({name:"DateTimeInput",props:{label:String,modelValue:{type:Date,required:!0}},data(){return{currentValue:this.modelValue,date:this.modelValue}},methods:{input(){this.$emit("update:modelValue",this.currentValue)},onValueChange(t){this.currentValue=t,this.input()}},watch:{date(t){this.currentValue=new Date(this.date),this.input()},value(t){this.onValueChange(t)}}});var $=o(2857),D=o(2765),I=o(2952),P=o(8879),z=o(357),B=o(2146);const H=(0,k.Z)(O,[["render",j]]),T=H;W()(O,"components",{QInput:q.Z,QIcon:$.Z,QPopupProxy:D.Z,QDate:I.Z,QBtn:P.Z,QTime:z.Z}),W()(O,"directives",{ClosePopup:B.Z});var L=function(t,e,o,n){function i(t){return t instanceof o?t:new o((function(e){e(t)}))}return new(o||(o=Promise))((function(o,r){function a(t){try{l(n.next(t))}catch(e){r(e)}}function s(t){try{l(n["throw"](t))}catch(e){r(e)}}function l(t){t.done?o(t.value):i(t.value).then(a,s)}l((n=n.apply(t,e||[])).next())}))};const M=(0,n.aZ)({name:"RunAlgoModal",props:{algorithm:{type:Object,required:!0},robot:{type:a.n,required:!1}},components:{DateTimeInput:T,OrderOptionsInput:Q},data(){return{show:!1,loading:!1,fields:[]}},computed:{robots(){return this.getRobotsByAlgorithm(this.algorithm.name).filter((t=>"Active"===t.status))}},methods:Object.assign(Object.assign({},(0,S.nv)(A.R,["runAlgorithm","getAlgorithmInputsTypes","getRobotsByAlgorithm","runAlgorithmForActiveRobots"])),{startAlgo(){return L(this,void 0,void 0,(function*(){this.loading=!0;const t={};this.fields.forEach((e=>{t[e.name]=e.value})),this.robot?yield this.runAlgorithm(this.robot,this.algorithm.name,t):yield this.runAlgorithmForActiveRobots(this.algorithm.name,t),this.loading=!1,this.show=!1}))}}),created(){const t=this.getAlgorithmInputsTypes(this.algorithm);this.fields=Object.keys(t).map((e=>{let o=t[e],n=0;switch(o){case"number":n=0;break;case"string":n="";break;case"Date":n=new Date;break;case"OrderDetails":n={lots:0,operation:"limit_buy",price:0,ticker:""}}return{name:e,type:o,value:n}}))}});var Y=o(7743),F=o(4526),N=o(8326),E=o(1821);const K=(0,k.Z)(M,[["render",w]]),J=K;W()(M,"components",{QDialog:Y.Z,QCard:_.Z,QBar:F.Z,QForm:N.Z,QCardSection:Z.Z,QInput:q.Z,QCardActions:E.Z,QBtn:P.Z,QIcon:$.Z});var G=o(8242);const X=(0,n.aZ)({name:"AlgorithmItem",props:{algorithm:{type:Object,required:!0},robot:{type:a.n,required:!1}},components:{RobotAvatar:G.Z,RunAlgoModal:J},computed:{inputs(){return this.getAlgorithmInputsTypes(this.algorithm)},activeRobots(){return this.getRobotsByAlgorithm(this.algorithm.name).filter((t=>"Active"===t.status))}},methods:Object.assign({},(0,S.nv)(A.R,["getAlgorithmInputsTypes","getRobotsByAlgorithm"]))});var tt=o(490),et=o(1233),ot=o(7691),nt=o(3246),it=o(3115);const rt=(0,k.Z)(X,[["render",d],["__scopeId","data-v-12ba46fb"]]),at=rt;W()(X,"components",{QItem:tt.Z,QItemSection:et.Z,QCard:_.Z,QCardSection:Z.Z,QChip:ot.Z,QList:nt.Z,QItemLabel:it.Z,QCardActions:E.Z,QBtn:P.Z});var st=function(t,e,o,n){function i(t){return t instanceof o?t:new o((function(e){e(t)}))}return new(o||(o=Promise))((function(o,r){function a(t){try{l(n.next(t))}catch(e){r(e)}}function s(t){try{l(n["throw"](t))}catch(e){r(e)}}function l(t){t.done?o(t.value):i(t.value).then(a,s)}l((n=n.apply(t,e||[])).next())}))};const lt=(0,n.aZ)({name:"AlgorithmsList",props:{robot:{type:a.n,required:!1}},data(){return{localAlgorithms:[],loading:!1}},computed:Object.assign(Object.assign({},(0,S.rn)(A.R,{globalAlgorithms:"algorithms"})),{algorithms(){return this.robot?this.localAlgorithms:this.globalAlgorithms.map((t=>t.algorithm))}}),methods:Object.assign(Object.assign({},(0,S.nv)(A.R,["getAlgorithms"])),{fetch(){return st(this,void 0,void 0,(function*(){this.loading=!0;try{this.robot&&(this.localAlgorithms=yield this.getAlgorithms(this.robot))}catch(t){this.localAlgorithms=[]}this.loading=!1}))}}),components:{AlgorithmItem:at},mounted(){return st(this,void 0,void 0,(function*(){yield this.fetch()}))},watch:{robot(){this.fetch()}}});var ut=o(854),ct=o(5304);const dt=(0,k.Z)(lt,[["render",r]]),ht=dt;W()(lt,"components",{QCard:_.Z,QCardSection:Z.Z,QList:nt.Z,QInnerLoading:ut.Z,QSpinnerBall:ct.Z})},1018:(t,e,o)=>{o.d(e,{Z:()=>O});var n=o(9835),i=o(6970);const r={class:"q-px-md q-my-lg q-mx-auto",style:{"max-width":"800px",background:"lightgray","border-radius":"5px"}},a=(0,n.Uk)("Portfolio");function s(t,e,o,s,l,u){const c=(0,n.up)("q-card-section"),d=(0,n.up)("CurrencySign"),h=(0,n.up)("PortfolioItem"),m=(0,n.up)("q-list"),p=(0,n.up)("q-spinner-ball"),g=(0,n.up)("q-inner-loading");return(0,n.wg)(),(0,n.iD)("div",r,[(0,n.Wm)(c,{class:"text-h4"},{default:(0,n.w5)((()=>[(0,n.WI)(t.$slots,"default",{},(()=>[a]))])),_:3}),t.balance?((0,n.wg)(),(0,n.j4)(c,{key:0,class:"bg-white q-mx-md rounded-borders"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.balance,(t=>((0,n.wg)(),(0,n.iD)("span",{key:t.currency_ticker,class:"q-mr-md"},[(0,n.Uk)((0,i.zw)(t.balance.toLocaleString("de-DE")),1),(0,n.Wm)(d,{ticker:t.currency_ticker,class:"text-bold"},null,8,["ticker"])])))),128))])),_:1})):(0,n.kq)("",!0),(0,n.Wm)(c,{class:"q-pa-md"},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{separator:"",style:{"max-height":"300px","overflow-y":"auto"},class:"bg-white rounded-borders"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.portfolio,((e,o)=>((0,n.wg)(),(0,n.j4)(h,{key:o,"portfolio-position":e,robot:t.robot},null,8,["portfolio-position","robot"])))),128))])),_:1})])),_:1}),(0,n.Wm)(g,{showing:t.loading},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{size:"50px",color:"primary"})])),_:1},8,["showing"])])}var l=o(3043),u=o(7363);function c(t,e,o,r,a,s){const l=(0,n.up)("q-item-label"),u=(0,n.up)("q-item-section"),c=(0,n.up)("CurrencySign"),d=(0,n.up)("q-spinner-facebook"),h=(0,n.up)("q-inner-loading"),m=(0,n.up)("q-item");return(0,n.wg)(),(0,n.j4)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[(0,n.Wm)(l,{style:{"font-size":"18px","font-weight":"bold"}},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(t.security.name),1)])),_:1}),(0,n.Wm)(l,{caption:"",style:{"font-size":"14px"}},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(t.portfolioPosition.security_ticker)+" x"+(0,i.zw)(t.portfolioPosition.amount),1)])),_:1})])),_:1}),(0,n.Wm)(u,{side:"",top:""},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{caption:"",style:{"font-size":"16px","font-weight":"bold"}},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(t.security.price)+" ",1),(0,n.Wm)(c,{ticker:t.security.currency_ticker},null,8,["ticker"])])),_:1}),t.robot?((0,n.wg)(),(0,n.j4)(l,{key:0,caption:"",class:(0,i.C_)("text-"+(t.growth?"green":"red")),style:{"font-size":"14px"}},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(t.growth?"↑":"↓")+(0,i.zw)(Math.round(100*t.buyPrice.price)/100)+" ",1),(0,n.Wm)(c,{ticker:t.security.currency_ticker},null,8,["ticker"]),(0,n.Uk)(" ("+(0,i.zw)(t.diffRelative)+" %) ",1)])),_:1},8,["class"])):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(h,{showing:t.loading},{default:(0,n.w5)((()=>[(0,n.Wm)(d)])),_:1},8,["showing"])])),_:1})}var d=o(3260),h=o(7898);function m(t,e,o,r,a,s){return(0,n.wg)(),(0,n.iD)("span",null,(0,i.zw)(t.sign),1)}const p=(0,n.aZ)({name:"CurrencySign",props:{ticker:{type:String,required:!0}},computed:{sign(){switch(this.ticker){case"USD":return"$";case"RUB":return"₽";case"EUR":return"€";default:return"M"}}}});var g=o(1639);const b=(0,g.Z)(p,[["render",m]]),f=b;var w=function(t,e,o,n){function i(t){return t instanceof o?t:new o((function(e){e(t)}))}return new(o||(o=Promise))((function(o,r){function a(t){try{l(n.next(t))}catch(e){r(e)}}function s(t){try{l(n["throw"](t))}catch(e){r(e)}}function l(t){t.done?o(t.value):i(t.value).then(a,s)}l((n=n.apply(t,e||[])).next())}))};const y=(0,n.aZ)({name:"PortfolioItem",components:{CurrencySign:f},props:{portfolioPosition:{type:Object,required:!0},robot:{type:d.n,required:!1}},data(){return{buyPrice:{ticker:"",price:0},loading:!0}},methods:Object.assign(Object.assign({},(0,u.nv)(l.a,["getAverageBuyPrice"])),(0,u.nv)(h.$,["getSecurity"])),computed:Object.assign(Object.assign({},(0,u.rn)(h.$,["securities"])),{security(){return this.getSecurity(this.portfolioPosition.security_ticker)},growth(){var t;return((null===(t=this.security)||void 0===t?void 0:t.price)||0)>this.buyPrice.price},diffAbsolute(){var t;let e=Math.abs(((null===(t=this.security)||void 0===t?void 0:t.price)||0)-this.buyPrice.price);return Math.round(100*e)/100},diffRelative(){let t=this.diffAbsolute/this.buyPrice.price*100;return Math.round(100*t)/100}}),created(){return w(this,void 0,void 0,(function*(){this.loading=!0;try{this.robot&&(this.buyPrice=yield this.getAverageBuyPrice(this.robot,this.portfolioPosition.security_ticker))}catch(t){}this.loading=!1}))}});var v=o(490),k=o(1233),_=o(3115),Z=o(854),q=o(7234),x=o(9984),V=o.n(x);const W=(0,g.Z)(y,[["render",c]]),R=W;V()(y,"components",{QItem:v.Z,QItemSection:k.Z,QItemLabel:_.Z,QInnerLoading:Z.Z,QSpinnerFacebook:q.Z});var Q=function(t,e,o,n){function i(t){return t instanceof o?t:new o((function(e){e(t)}))}return new(o||(o=Promise))((function(o,r){function a(t){try{l(n.next(t))}catch(e){r(e)}}function s(t){try{l(n["throw"](t))}catch(e){r(e)}}function l(t){t.done?o(t.value):i(t.value).then(a,s)}l((n=n.apply(t,e||[])).next())}))};const S=(0,n.aZ)({name:"PortfolioView",components:{CurrencySign:f,PortfolioItem:R},props:{robot:{type:Object,required:!1}},data(){return{portfolio:[],balance:[],loading:!1}},methods:Object.assign(Object.assign({},(0,u.nv)(l.a,["getAverageBuyPrice","getUnitedPortfolio","getUnitedBalance","getPortfolio","getCurrenciesBalance"])),{fetch(){return Q(this,void 0,void 0,(function*(){this.loading=!0;try{this.robot?(this.portfolio=yield this.getPortfolio(this.robot),this.balance=yield this.getCurrenciesBalance(this.robot)):(this.portfolio=yield this.getUnitedPortfolio(),this.balance=yield this.getUnitedBalance())}catch(t){this.portfolio=[],this.balance=[]}this.loading=!1}))}}),watch:{robot(){this.fetch()}},mounted(){this.fetch()}});var A=o(3190),U=o(3246),C=o(5304);const j=(0,g.Z)(S,[["render",s]]),O=j;V()(S,"components",{QCardSection:A.Z,QList:U.Z,QInnerLoading:Z.Z,QSpinnerBall:C.Z})},8242:(t,e,o)=>{o.d(e,{Z:()=>m});var n=o(9835),i=o(6970);function r(t,e,o,r,a,s){const l=(0,n.up)("q-avatar");return(0,n.wg)(),(0,n.j4)(l,{size:"1.5em",color:t.color,class:"text-white"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(t.firstLetter),1)])),_:1},8,["color"])}const a=o(5168),s=(0,n.aZ)({name:"RobotAvatar",props:{name:{type:String,required:!0}},data(){return{colors:["red","blue","orange","green","teal","purple","deep-purple","indigo","brown"],rand:a(this.name)}},computed:{color(){return this.colors[this.rand(this.colors.length)]},firstLetter(){return this.name.substring(0,1).toUpperCase()}}});var l=o(1639),u=o(1357),c=o(9984),d=o.n(c);const h=(0,l.Z)(s,[["render",r]]),m=h;d()(s,"components",{QAvatar:u.Z})},6256:(t,e,o)=>{o.d(e,{Z:()=>m});var n=o(9835),i=o(6970);function r(t,e,o,r,a,s){const l=(0,n.up)("q-chip");return(0,n.wg)(),(0,n.j4)(l,{dark:"",dense:t.dense,color:t.color},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(t.robot.status),1)])),_:1},8,["dense","color"])}var a=o(3260);const s=(0,n.aZ)({name:"RobotStatus",props:{robot:{type:a.n,required:!0},dense:Boolean},computed:{color(){switch(this.robot.status){case"Active":return"positive";case"Disconnected":return"negative";case"Not Authorized":return"warning";default:return"primary"}}}});var l=o(1639),u=o(7691),c=o(9984),d=o.n(c);const h=(0,l.Z)(s,[["render",r]]),m=h;d()(s,"components",{QChip:u.Z})}}]);