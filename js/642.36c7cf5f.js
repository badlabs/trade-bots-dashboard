"use strict";(self["webpackChunktrade_bots_dashboard"]=self["webpackChunktrade_bots_dashboard"]||[]).push([[642],{5642:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Ie});var a=o(9835),l=o(6970);const n={class:"q-pa-md"},i={class:"q-gutter-sm"},r={class:"row justify-between"},u=(0,a.Uk)(" Robot ");function s(e,t,o,s,d,m){const c=(0,a.up)("q-btn"),p=(0,a.up)("RobotAvatar"),h=(0,a.up)("RobotLogsModal"),g=(0,a.up)("PortfolioStatistics"),b=(0,a.up)("AlgosList");return(0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("div",i,[(0,a.Wm)(c,{color:"primary",to:"/robots",label:"< Robots"})]),(0,a._)("div",r,[(0,a._)("h4",null,[(0,a.Wm)(p,{name:e.robot.name},null,8,["name"]),u,(0,a._)("code",null,(0,l.zw)(e.robot.name),1)]),(0,a._)("div",null,[(0,a.Wm)(h,{robot:e.robot},null,8,["robot"])])]),(0,a.Wm)(g,{robot:e.robot},null,8,["robot"]),(0,a.Wm)(b,{robot:e.robot},null,8,["robot"])])}var d=o(7363),m=o(4268);const c=(0,a.Uk)("Minimize"),p=(0,a.Uk)("Maximize"),h=(0,a.Uk)("Close"),g=(0,a.Uk)("Logs");function b(e,t,o,n,i,r){const u=(0,a.up)("q-space"),s=(0,a.up)("q-tooltip"),d=(0,a.up)("q-btn"),m=(0,a.up)("q-bar"),b=(0,a.up)("RobotLogs"),w=(0,a.up)("q-card"),f=(0,a.up)("q-dialog"),y=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(f,{modelValue:e.show,"onUpdate:modelValue":t[2]||(t[2]=t=>e.show=t),persistent:"",maximized:e.maximizedToggle,"transition-show":"slide-up","transition-hide":"slide-down"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{style:(0,l.j5)({maxHeight:e.maximizedToggle?void 0:"50vh"}),class:"bg-black text-white"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{class:"bg-primary"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Logs "+(0,l.zw)(e.robot.name)+" ",1),(0,a.Wm)(u),(0,a.Wm)(d,{dense:"",flat:"",icon:"minimize",onClick:t[0]||(t[0]=t=>e.maximizedToggle=!1),disable:!e.maximizedToggle},{default:(0,a.w5)((()=>[e.maximizedToggle?((0,a.wg)(),(0,a.j4)(s,{key:0,class:"bg-white text-primary"},{default:(0,a.w5)((()=>[c])),_:1})):(0,a.kq)("",!0)])),_:1},8,["disable"]),(0,a.Wm)(d,{dense:"",flat:"",icon:"crop_square",onClick:t[1]||(t[1]=t=>e.maximizedToggle=!0),disable:e.maximizedToggle},{default:(0,a.w5)((()=>[e.maximizedToggle?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(s,{key:0,class:"bg-white text-primary"},{default:(0,a.w5)((()=>[p])),_:1}))])),_:1},8,["disable"]),(0,a.wy)(((0,a.wg)(),(0,a.j4)(d,{dense:"",flat:"",icon:"close"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{class:"bg-white text-primary"},{default:(0,a.w5)((()=>[h])),_:1})])),_:1})),[[y]])])),_:1}),(0,a.Wm)(b,{robot:e.robot},null,8,["robot"])])),_:1},8,["style"])])),_:1},8,["modelValue","maximized"]),(0,a.Wm)(d,{onClick:t[3]||(t[3]=t=>e.show=!e.show),color:"primary"},{default:(0,a.w5)((()=>[g])),_:1})],64)}var w=o(3260),f=o(4022);const y=(0,a.aZ)({name:"RobotLogsModal",components:{RobotLogs:f.Z},props:{robot:{type:w.n,required:!0}},data(){return{show:!1,maximizedToggle:!0}}});var _=o(1639),V=o(7743),v=o(4458),q=o(4526),Z=o(136),W=o(4455),k=o(6858),Q=o(2146),x=o(9984),U=o.n(x);const j=(0,_.Z)(y,[["render",b]]),C=j;U()(y,"components",{QDialog:V.Z,QCard:v.Z,QBar:q.Z,QSpace:Z.Z,QBtn:W.Z,QTooltip:k.Z}),U()(y,"directives",{ClosePopup:Q.Z});const I=(0,a.Uk)(" Algorithms ");function D(e,t,o,l,n,i){const r=(0,a.up)("q-card-section"),u=(0,a.up)("AlgorithmItem"),s=(0,a.up)("q-list"),d=(0,a.up)("q-spinner-ball"),m=(0,a.up)("q-inner-loading"),c=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(c,{class:"q-pa-md q-my-lg q-mx-auto",style:{"max-width":"800px",background:"lightblue","border-radius":"5px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{class:"text-h3"},{default:(0,a.w5)((()=>[I])),_:1}),(0,a.Wm)(s,{style:{"max-height":"300px","overflow-y":"auto"},separator:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.algorithms,((t,o)=>((0,a.wg)(),(0,a.j4)(u,{key:o,robot:e.robot,algorithm:t,dense:""},null,8,["robot","algorithm"])))),128))])),_:1}),(0,a.Wm)(m,{showing:e.loading},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{size:"50px",color:"primary"})])),_:1},8,["showing"])])),_:1})}function A(e,t,o,n,i,r){const u=(0,a.up)("q-card-section"),s=(0,a.up)("q-item-section"),d=(0,a.up)("q-chip"),m=(0,a.up)("q-item-label"),c=(0,a.up)("q-item"),p=(0,a.up)("q-list"),h=(0,a.up)("q-btn"),g=(0,a.up)("RunAlgoModal"),b=(0,a.up)("q-card-actions"),w=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(c,{dense:""},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{class:"q-pa-sm q-my-sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{class:"my-card",style:{"max-height":"300px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{class:"text-h5"},{default:(0,a.w5)((()=>[(0,a.Uk)("Algorithm "+(0,l.zw)(e.algorithm.name),1)])),_:1}),(0,a.Wm)(p,{separator:"",class:"bg-white"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.inputs,((e,t)=>((0,a.wg)(),(0,a.j4)(c,{key:t},{default:(0,a.w5)((()=>[(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(t),1)])),_:2},1024),(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a._)("code",null,(0,l.zw)(e),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),(0,a.Wm)(b,{align:"right"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{color:"primary",to:`/robots/${e.robot.name}/algorithms/${e.algorithm.name}`,label:"Runs"},null,8,["to"]),(0,a.Wm)(g,{robot:e.robot,algorithm:e.algorithm},null,8,["robot","algorithm"])])),_:1})])),_:1})])),_:1})])),_:1})}var z=o(1957);const R={class:"q-ma-md"},O=(0,a.Uk)(" Run algorithm "),T=(0,a.Uk)(" for "),S=(0,a.Uk)(" Start "),L=(0,a.Uk)("Cancel"),M=(0,a.Uk)("Run");function Y(e,t,o,n,i,r){const u=(0,a.up)("q-bar"),s=(0,a.up)("q-input"),d=(0,a.up)("OrderOptionsInput"),m=(0,a.up)("DateTimeInput"),c=(0,a.up)("q-card-section"),p=(0,a.up)("q-btn"),h=(0,a.up)("q-card-actions"),g=(0,a.up)("q-form"),b=(0,a.up)("q-card"),w=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(w,{modelValue:e.show,"onUpdate:modelValue":t[1]||(t[1]=t=>e.show=t),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{style:{"min-width":"400px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{class:"bg-primary text-white"},{default:(0,a.w5)((()=>[(0,a._)("div",R,[O,(0,a._)("code",null,(0,l.zw)(e.algorithm.name),1),T,(0,a._)("code",null,(0,l.zw)(e.robot.name),1)])])),_:1}),(0,a.Wm)(g,{onSubmit:(0,z.iM)(e.startAlgo,["prevent"])},{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.fields,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.name},["number"===e.type?((0,a.wg)(),(0,a.j4)(s,{key:0,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,type:"number",label:e.name},null,8,["modelValue","onUpdate:modelValue","label"])):"OrderDetails"===e.type?((0,a.wg)(),(0,a.j4)(d,{key:1,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,label:e.name},null,8,["modelValue","onUpdate:modelValue","label"])):"string"===e.type?((0,a.wg)(),(0,a.j4)(s,{key:2,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,label:e.name},null,8,["modelValue","onUpdate:modelValue","label"])):"Date"===e.type?((0,a.wg)(),(0,a.j4)(m,{key:3,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,label:e.name},null,8,["modelValue","onUpdate:modelValue","label"])):(0,a.kq)("",!0)])))),128))])),_:1}),(0,a.Wm)(h,{align:"right"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{color:"primary",type:"submit",loading:e.loading},{default:(0,a.w5)((()=>[S])),_:1},8,["loading"]),(0,a.Wm)(p,{color:"red",onClick:t[0]||(t[0]=t=>e.show=!e.show)},{default:(0,a.w5)((()=>[L])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(p,{onClick:t[2]||(t[2]=t=>e.show=!e.show),color:"primary"},{default:(0,a.w5)((()=>[M])),_:1})],64)}function H(e,t,o,n,i,r){const u=(0,a.up)("q-input"),s=(0,a.up)("q-select"),d=(0,a.up)("q-card-section"),m=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{class:"row justify-between"},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,l.zw)(e.label||"OrderDetails"),1),(0,a._)("div",null,[(0,a.Wm)(u,{modelValue:e.currentValue.ticker,"onUpdate:modelValue":t[0]||(t[0]=t=>e.currentValue.ticker=t),label:"Ticker",onInput:e.input},null,8,["modelValue","onInput"]),(0,a.Wm)(s,{modelValue:e.currentValue.operation,"onUpdate:modelValue":t[1]||(t[1]=t=>e.currentValue.operation=t),options:e.operationTypes,label:"Operation",onInput:e.input},null,8,["modelValue","options","onInput"]),(0,a.Wm)(u,{modelValue:e.currentValue.price,"onUpdate:modelValue":t[2]||(t[2]=t=>e.currentValue.price=t),type:"number",label:"Price",onInput:e.input},null,8,["modelValue","onInput"]),(0,a.Wm)(u,{modelValue:e.currentValue.lots,"onUpdate:modelValue":t[3]||(t[3]=t=>e.currentValue.lots=t),type:"number",label:"Lots",onInput:e.input},null,8,["modelValue","onInput"])])])),_:1})])),_:1})}const P=(0,a.aZ)({name:"OrderOptionsInput",props:{label:String,modelValue:{type:Object,required:!0}},data(){return{currentValue:this.modelValue,operationTypes:["limit_buy","limit_sell","market_buy","market_sell","buy_or_cancel","sell_or_cancel"]}},methods:{input(){this.$emit("update:modelValue",this.currentValue)},onValueChange(e){this.currentValue=e,this.input()}},watch:{value(e){this.onValueChange(e)}}});var B=o(3190),$=o(6611),K=o(6384);const E=(0,_.Z)(P,[["render",H]]),F=E;U()(P,"components",{QCard:v.Z,QCardSection:B.Z,QInput:$.Z,QSelect:K.Z});var G=o(1291);const J={class:"row items-center justify-end"},N={class:"row items-center justify-end"};function X(e,t,o,l,n,i){const r=(0,a.up)("q-btn"),u=(0,a.up)("q-date"),s=(0,a.up)("q-popup-proxy"),d=(0,a.up)("q-icon"),m=(0,a.up)("q-time"),c=(0,a.up)("q-input"),p=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(c,{modelValue:e.date,"onUpdate:modelValue":t[2]||(t[2]=t=>e.date=t),label:e.label},{prepend:(0,a.w5)((()=>[(0,a.Wm)(d,{name:"event",class:"cursor-pointer"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:e.date,"onUpdate:modelValue":t[0]||(t[0]=t=>e.date=t),mask:"YYYY-MM-DD HH:mm"},{default:(0,a.w5)((()=>[(0,a._)("div",J,[(0,a.wy)((0,a.Wm)(r,{label:"Close",color:"primary",flat:""},null,512),[[p]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),append:(0,a.w5)((()=>[(0,a.Wm)(d,{name:"access_time",class:"cursor-pointer"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:e.date,"onUpdate:modelValue":t[1]||(t[1]=t=>e.date=t),mask:"YYYY-MM-DD HH:mm",format24h:""},{default:(0,a.w5)((()=>[(0,a._)("div",N,[(0,a.wy)((0,a.Wm)(r,{label:"Close",color:"primary",flat:""},null,512),[[p]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue","label"])}const ee=(0,a.aZ)({name:"DateTimeInput",props:{label:String,modelValue:{type:Date,required:!0}},data(){return{currentValue:this.modelValue,date:this.modelValue}},methods:{input(){this.$emit("update:modelValue",this.currentValue)},onValueChange(e){this.currentValue=e,this.input()}},watch:{date(e){this.currentValue=new Date(this.date),this.input()},value(e){this.onValueChange(e)}}});var te=o(2857),oe=o(2765),ae=o(2952),le=o(357);const ne=(0,_.Z)(ee,[["render",X]]),ie=ne;U()(ee,"components",{QInput:$.Z,QIcon:te.Z,QPopupProxy:oe.Z,QDate:ae.Z,QBtn:W.Z,QTime:le.Z}),U()(ee,"directives",{ClosePopup:Q.Z});var re=function(e,t,o,a){function l(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,n){function i(e){try{u(a.next(e))}catch(t){n(t)}}function r(e){try{u(a["throw"](e))}catch(t){n(t)}}function u(e){e.done?o(e.value):l(e.value).then(i,r)}u((a=a.apply(e,t||[])).next())}))};const ue=(0,a.aZ)({name:"RunAlgoModal",props:{algorithm:{type:Object,required:!0},robot:{type:w.n,required:!0}},components:{DateTimeInput:ie,OrderOptionsInput:F},data(){return{show:!1,loading:!1,fields:[]}},methods:Object.assign(Object.assign({},(0,d.nv)(G.R,["runAlgorithm","getAlgorithmInputsTypes"])),{startAlgo(){return re(this,void 0,void 0,(function*(){this.loading=!0;const e={};this.fields.forEach((t=>{e[t.name]=t.value})),yield this.runAlgorithm(this.robot,this.algorithm.name,e),this.loading=!1,this.show=!1}))}}),created(){const e=this.getAlgorithmInputsTypes(this.algorithm);this.fields=Object.keys(e).map((t=>{let o=e[t],a=0;switch(o){case"number":a=0;break;case"string":a="";break;case"Date":a=new Date;break;case"OrderDetails":a={lots:0,operation:"limit_buy",price:0,ticker:""}}return{name:t,type:o,value:a}}))}});var se=o(8326),de=o(1821);const me=(0,_.Z)(ue,[["render",Y]]),ce=me;U()(ue,"components",{QDialog:V.Z,QCard:v.Z,QBar:q.Z,QForm:se.Z,QCardSection:B.Z,QInput:$.Z,QCardActions:de.Z,QBtn:W.Z});const pe=(0,a.aZ)({name:"AlgorithmItem",props:{algorithm:{type:Object,required:!0},robot:{type:w.n,required:!0}},components:{RunAlgoModal:ce},computed:{inputs(){return this.getAlgorithmInputsTypes(this.algorithm)}},methods:Object.assign({},(0,d.nv)(G.R,["getAlgorithmInputsTypes"]))});var he=o(490),ge=o(1233),be=o(3246),we=o(3115),fe=o(7691);const ye=(0,_.Z)(pe,[["render",A]]),_e=ye;U()(pe,"components",{QItem:he.Z,QItemSection:ge.Z,QCard:v.Z,QCardSection:B.Z,QList:be.Z,QItemLabel:we.Z,QChip:fe.Z,QCardActions:de.Z,QBtn:W.Z});var Ve=function(e,t,o,a){function l(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,n){function i(e){try{u(a.next(e))}catch(t){n(t)}}function r(e){try{u(a["throw"](e))}catch(t){n(t)}}function u(e){e.done?o(e.value):l(e.value).then(i,r)}u((a=a.apply(e,t||[])).next())}))};const ve=(0,a.aZ)({name:"AlgosList",props:{robot:{type:w.n,required:!0}},data(){return{algorithms:[],loading:!1}},methods:Object.assign(Object.assign({},(0,d.nv)(G.R,["getAlgorithms"])),{fetch(){return Ve(this,void 0,void 0,(function*(){this.loading=!0;try{this.algorithms=yield this.getAlgorithms(this.robot)}catch(e){this.algorithms=[]}this.loading=!1}))}}),components:{AlgorithmItem:_e},mounted(){return Ve(this,void 0,void 0,(function*(){this.fetch()}))},watch:{robot(){this.fetch()}}});var qe=o(854),Ze=o(5304);const We=(0,_.Z)(ve,[["render",D]]),ke=We;U()(ve,"components",{QCard:v.Z,QCardSection:B.Z,QList:be.Z,QInnerLoading:qe.Z,QSpinnerBall:Ze.Z});var Qe=o(3657),xe=o(6194),Ue=function(e,t,o,a){function l(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,n){function i(e){try{u(a.next(e))}catch(t){n(t)}}function r(e){try{u(a["throw"](e))}catch(t){n(t)}}function u(e){e.done?o(e.value):l(e.value).then(i,r)}u((a=a.apply(e,t||[])).next())}))};const je=(0,a.aZ)({name:"RobotScreen",components:{RobotAvatar:xe.Z,PortfolioStatistics:m.Z,AlgosList:ke,RobotLogsModal:C},data(){return{}},mixins:[Qe.y],methods:Object.assign(Object.assign({},(0,d.nv)(G.R,["getAlgorithms"])),{updateRobotData(){return Ue(this,void 0,void 0,(function*(){}))}}),watch:{robot(){this.updateRobotData()}},created(){this.updateRobotData()}}),Ce=(0,_.Z)(je,[["render",s]]),Ie=Ce;U()(je,"components",{QBtn:W.Z})}}]);