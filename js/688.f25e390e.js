"use strict";(self["webpackChunktrade_bots_dashboard"]=self["webpackChunktrade_bots_dashboard"]||[]).push([[688],{3260:(t,e,i)=>{i.d(e,{n:()=>o});class o{constructor({name:t,host:e,restPort:i,wsPort:o,token:s}){this.name=t,this._host=e,this._restPort=i,this._wsPort=o,this._token=s}get restUrl(){return`http://${this._host}:${this._restPort}`}get wsUrl(){return`ws://${this._host}:${this._wsPort}`}get authHeader(){return{Authorization:`Bearer ${this._token}`}}}},410:(t,e,i)=>{i.d(e,{I:()=>c});var o=i(7363),s=i(7898),r=i(1623),n=i(1354),a=function(t,e,i,o){function s(t){return t instanceof i?t:new i((function(e){e(t)}))}return new(i||(i=Promise))((function(i,r){function n(t){try{c(o.next(t))}catch(e){r(e)}}function a(t){try{c(o["throw"](t))}catch(e){r(e)}}function c(t){t.done?i(t.value):s(t.value).then(n,a)}c((o=o.apply(t,e||[])).next())}))};const c=(0,o.Q_)("robotStatisticsActions",{state:()=>({}),getters:{},actions:{getPositionStatistics(t){const e=(0,s.$)(),i=e.getSecurity(t.security_ticker);if(!i)return;const o=t.amount*(t.buy_price||i.price),r=t.amount*i.price,n=Math.abs(o-r),a=n/o*100;return{buyPrice:o,price:r,growth:r>o,diffAbs:n,diffPer:a}},getPortfolioStatistics(t){return{buyPriceAll:0,priceAll:0,growth:!0,diffAbs:0,diffPer:0}},getUnitePortfolioStatistics(){return a(this,void 0,void 0,(function*(){(0,s.$)();const t=(0,r.V)(),e=(0,n.R)(),i=t.robots,o=i.map((t=>a(this,void 0,void 0,(function*(){return yield e.getPortfolio(t)})))),c=yield Promise.all(o),u=c.reduce(((t,e)=>(e.forEach((e=>{const i=t.find((t=>t.security_ticker==e.security_ticker));i?i.amount+=e.amount:t.push(e)})),t)),[]);return{unitedPortfolio:u,unitedPortfolioStatistics:this.getPortfolioStatistics(u)}}))}}})},1354:(t,e,i)=>{i.d(e,{R:()=>c});var o=i(7363),s=i(7898),r=i(9981),n=i.n(r),a=function(t,e,i,o){function s(t){return t instanceof i?t:new i((function(e){e(t)}))}return new(i||(i=Promise))((function(i,r){function n(t){try{c(o.next(t))}catch(e){r(e)}}function a(t){try{c(o["throw"](t))}catch(e){r(e)}}function c(t){t.done?i(t.value):s(t.value).then(n,a)}c((o=o.apply(t,e||[])).next())}))};const c=(0,o.Q_)("robotActions",{state:()=>({}),getters:{},actions:{getSecurities(t){return a(this,void 0,void 0,(function*(){const e=(0,s.$)(),{data:i}=yield n().get(`${t.restUrl}/api/state/securities`,{headers:t.authHeader});return e.updateSecurities(i),i}))},updateSecurities(t){return a(this,void 0,void 0,(function*(){const e=(0,s.$)(),{data:i}=yield n().post(`${t.restUrl}/api/state/securities`,{},{headers:t.authHeader});return e.updateSecurities(i),i}))},getPortfolio(t){return a(this,void 0,void 0,(function*(){const{data:e}=yield n().get(`${t.restUrl}/api/state/portfolio`,{headers:t.authHeader});return e}))},updatePortfolio(t){return a(this,void 0,void 0,(function*(){const{data:e}=yield n().post(`${t.restUrl}/api/state/portfolio`,{},{headers:t.authHeader});return e}))},getAlgorithms(t){return a(this,void 0,void 0,(function*(){const{data:e}=yield n().get(`${t.restUrl}/api/algos`,{headers:t.authHeader});return e}))},getCurrencies(t){return a(this,void 0,void 0,(function*(){const{data:e}=yield n().get(`${t.restUrl}/api/state/currencies`,{headers:t.authHeader});return e}))},updateCurrencies(t){return a(this,void 0,void 0,(function*(){const{data:e}=yield n().post(`${t.restUrl}/api/state/currencies`,{},{headers:t.authHeader});return e}))}}})},1623:(t,e,i)=>{i.d(e,{V:()=>u});var o=i(7363),s=i(3260),r=i(9981),n=i.n(r),a=i(1354),c=function(t,e,i,o){function s(t){return t instanceof i?t:new i((function(e){e(t)}))}return new(i||(i=Promise))((function(i,r){function n(t){try{c(o.next(t))}catch(e){r(e)}}function a(t){try{c(o["throw"](t))}catch(e){r(e)}}function c(t){t.done?i(t.value):s(t.value).then(n,a)}c((o=o.apply(t,e||[])).next())}))};const u=(0,o.Q_)("robots",{state:()=>({robots:[]}),getters:{},actions:{checkRobotAuth(t){return c(this,void 0,void 0,(function*(){try{const e=new s.n(t),{data:i}=yield n().get(`${e.restUrl}/api/auth/check`,{headers:e.authHeader});return i.auth}catch(e){return!1}}))},addRobot(t){return c(this,void 0,void 0,(function*(){const e=(0,a.R)();if(!this.checkExistingRobot(t)){const i=new s.n(t);yield e.updateSecurities(i),yield e.updatePortfolio(i),this.robots.push(i)}}))},checkExistingRobot(t){const e=new s.n(t);return this.robots.some((t=>t.restUrl===e.restUrl||t.wsUrl===e.wsUrl))}}})},7898:(t,e,i)=>{i.d(e,{$:()=>s});var o=i(7363);const s=(0,o.Q_)("securities",{state:()=>({securities:[]}),getters:{},actions:{updateSecurities(t){t.forEach((t=>{const e=this.securities.find((e=>e.ticker===t.ticker));e?e.price=t.price:this.securities.push(t)}))},getSecurity(t){return this.securities.find((e=>e.ticker===t))}}})},5588:(t,e,i)=>{i.d(e,{Z:()=>b});var o=i(9835),s=i(6970);const r={class:"q-px-md q-my-lg q-mx-auto",style:{"max-width":"800px",background:"lightgray","border-radius":"5px"}},n={class:"q-pa-md"},a={class:"q-pt-md",style:{"font-size":"16px","font-weight":"bold"}},c={class:"q-pa-md"};function u(t,e,i,u,l,d){const f=(0,o.up)("q-item-label"),h=(0,o.up)("q-item-section"),p=(0,o.up)("q-item"),m=(0,o.up)("q-list");return(0,o.wg)(),(0,o.iD)("div",r,[(0,o._)("div",n,[(0,o._)("div",a," Total Currencies: $"+(0,s.zw)(t.statistics.priceAll),1),(0,o._)("div",{style:{"font-size":"14px"},class:(0,s.C_)("text-"+(t.statistics.growth?"green":"red"))},(0,s.zw)(t.statistics.growth?"↑":"↓")+(0,s.zw)(t.statistics.diffAbs)+" $ ("+(0,s.zw)(t.statistics.diffPer)+" %) ",3)]),(0,o._)("div",c,[(0,o.Wm)(m,{separator:"",style:{"max-height":"300px","overflow-y":"auto"},class:"bg-white"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.portfolio,((e,i)=>((0,o.wg)(),(0,o.j4)(p,{key:i},{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(f,{style:{"font-size":"18px","font-weight":"bold"}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.security_ticker),1)])),_:2},1024),(0,o.Wm)(f,{caption:"",style:{"font-size":"14px"}},{default:(0,o.w5)((()=>[(0,o.Uk)("x"+(0,s.zw)(e.amount),1)])),_:2},1024)])),_:2},1024),(0,o.Wm)(h,{side:"",top:""},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{caption:"",style:{"font-size":"16px","font-weight":"bold"}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.getPositionStatistics(e).price)+" $ ",1)])),_:2},1024),(0,o.Wm)(f,{caption:"",class:(0,s.C_)("text-"+(t.getPositionStatistics(e).growth?"green":"red")),style:{"font-size":"14px"}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.getPositionStatistics(e).growth?"↑":"↓")+(0,s.zw)(t.getPositionStatistics(e).diffAbs)+" $ ("+(0,s.zw)(t.getPositionStatistics(e).diffPer)+" %) ",1)])),_:2},1032,["class"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])])}var l=i(410),d=i(7363);const f=(0,o.aZ)({name:"PortfolioStatistics",props:{portfolio:{type:Array,required:!0}},computed:{statistics(){return this.getPortfolioStatistics(this.portfolio)}},methods:Object.assign({},(0,d.nv)(l.I,["getPortfolioStatistics","getPositionStatistics"]))});var h=i(1639),p=i(3246),m=i(490),g=i(1233),w=i(3115),y=i(9984),v=i.n(y);const _=(0,h.Z)(f,[["render",u]]),b=_;v()(f,"components",{QList:p.Z,QItem:m.Z,QItemSection:g.Z,QItemLabel:w.Z})},9688:(t,e,i)=>{i.r(e),i.d(e,{default:()=>A});var o=i(9835),s=i(6970);const r=t=>((0,o.dD)("data-v-3897221f"),t=t(),(0,o.Cn)(),t),n={class:"q-pa-md"},a={class:"q-gutter-sm"},c={class:"q-pa-md q-my-lg q-mx-auto",style:{"max-width":"800px",background:"lightblue","border-radius":"5px"}},u=r((()=>(0,o._)("div",{style:{"text-align":"center","font-size":"16px","font-weight":"bold"}},"Connected robots: Info",-1))),l={class:"q-pa-md q-my-lg q-mx-auto",style:{"max-width":"800px",background:"lightblue","border-radius":"5px"}},d=(0,o.Uk)(" Algorithm 1234 "),f=r((()=>(0,o._)("div",{class:"q-pa-md"},null,-1)));function h(t,e,i,r,h,p){const m=(0,o.up)("q-btn"),g=(0,o.up)("q-item-section"),w=(0,o.up)("q-chip"),y=(0,o.up)("q-item"),v=(0,o.up)("q-list"),_=(0,o.up)("PortfolioStatistics"),b=(0,o.up)("q-card-section"),P=(0,o.up)("q-card");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",n,[(0,o._)("div",a,[(0,o.Wm)(m,{color:"primary",href:"#/robots",label:"Robots"}),(0,o.Wm)(m,{color:"primary",href:"#/algorithms",label:"Algorithms"})])]),(0,o._)("div",c,[u,(0,o.Wm)(v,{separator:"",class:"connected-robots__items q-my-md"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.robots,((t,e)=>((0,o.wg)(),(0,o.j4)(y,{key:e},{default:(0,o.w5)((()=>[(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.name),1)])),_:2},1024),(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.algorithm||"used algorithm"),1)])),_:2},1024),(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(w,{color:"primary",dense:"",dark:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.status||"active"),1)])),_:2},1024)])])),_:2},1024)])),_:2},1024)))),128))])),_:1}),(0,o._)("div",null,[(0,o.Wm)(m,{color:"primary",href:"#/robots",label:"More",style:{"font-size":"12px"}})])]),(0,o.Wm)(_,{portfolio:t.unitedPortfolioStatistics.unitedPortfolio},null,8,["portfolio"]),(0,o._)("div",l,[(0,o.Wm)(v,{style:{"max-height":"300px","overflow-y":"auto"},separator:""},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.algos,((t,e)=>((0,o.wg)(),(0,o.j4)(y,{key:e,dense:""},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{class:"q-pa-sm q-my-sm"},{default:(0,o.w5)((()=>[(0,o.Wm)(P,{class:"my-card",style:{"max-height":"300px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(b,null,{default:(0,o.w5)((()=>[d])),_:1}),f])),_:1})])),_:1})])),_:2},1024)))),128))])),_:1})])],64)}var p=i(1623),m=i(410),g=i(7363),w=i(5588),y=function(t,e,i,o){function s(t){return t instanceof i?t:new i((function(e){e(t)}))}return new(i||(i=Promise))((function(i,r){function n(t){try{c(o.next(t))}catch(e){r(e)}}function a(t){try{c(o["throw"](t))}catch(e){r(e)}}function c(t){t.done?i(t.value):s(t.value).then(n,a)}c((o=o.apply(t,e||[])).next())}))};const v=(0,o.aZ)({name:"MainScreen",data(){return{algos:[1,2,3,4,5],securities:[1,2,3,4,5],unitedPortfolioStatistics:{unitedPortfolio:[],unitedPortfolioStatistics:{buyPriceAll:0,priceAll:0,growth:!1,diffAbs:0,diffPer:0}}}},components:{PortfolioStatistics:w.Z},methods:Object.assign({},(0,g.nv)(m.I,["getUnitePortfolioStatistics","getPositionStatistics"])),computed:Object.assign({},(0,g.rn)(p.V,["robots"])),created(){return y(this,void 0,void 0,(function*(){this.unitedPortfolioStatistics=yield this.getUnitePortfolioStatistics()}))}});var _=i(1639),b=i(4455),P=i(3246),x=i(490),S=i(1233),k=i(7691),q=i(4458),U=i(3190),z=i(9984),$=i.n(z);const W=(0,_.Z)(v,[["render",h],["__scopeId","data-v-3897221f"]]),A=W;$()(v,"components",{QBtn:b.Z,QList:P.Z,QItem:x.Z,QItemSection:S.Z,QChip:k.Z,QCard:q.Z,QCardSection:U.Z})}}]);