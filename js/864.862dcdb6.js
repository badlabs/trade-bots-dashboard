"use strict";(self["webpackChunktrade_bots_dashboard"]=self["webpackChunktrade_bots_dashboard"]||[]).push([[864],{2864:(t,o,n)=>{n.r(o),n.d(o,{default:()=>S});var e=n(9835),i=n(6970),l=n(1957);const s={class:"q-pa-md"},a={class:"q-gutter-sm"},r={class:"row justify-between"},d=(0,e.Uk)("Robot "),u=(0,e.Uk)(" : Algorithm "),c={class:"full-height"},h=(0,e._)("div",{class:"text-h6"},"Inputs",-1),m={class:"full-height"},p=(0,e._)("div",{class:"text-h6"},"State",-1);function g(t,o,n,g,w,b){const f=(0,e.up)("q-btn"),_=(0,e.up)("q-th"),v=(0,e.up)("q-tr"),y=(0,e.up)("q-td"),k=(0,e.up)("q-spinner-ball"),R=(0,e.up)("q-inner-loading"),W=(0,e.up)("q-table");return(0,e.wg)(),(0,e.iD)("div",s,[(0,e._)("div",a,[(0,e.Wm)(f,{color:"primary",to:"/robots",label:"< Robots"}),(0,e.Wm)(f,{color:"primary",to:`/robots/${t.robot.name}`,label:`< Robot ${t.robot.name}`},null,8,["to","label"])]),(0,e._)("div",r,[(0,e._)("h4",null,[d,(0,e._)("code",null,(0,i.zw)(t.robot.name),1),u,(0,e._)("code",null,(0,i.zw)(t.algorithm.name),1)])]),(0,e._)("section",null,[(0,e.Wm)(W,{rows:t.algorithmRuns,columns:t.columns,"row-key":"id",loading:t.loading},{header:(0,e.w5)((t=>[(0,e.Wm)(v,{props:t},{default:(0,e.w5)((()=>[(0,e.Wm)(_,{"auto-width":""}),((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(t.cols,(o=>((0,e.wg)(),(0,e.j4)(_,{key:o.name,props:t},{default:(0,e.w5)((()=>[(0,e.Uk)((0,i.zw)(o.label),1)])),_:2},1032,["props"])))),128)),(0,e.Wm)(_,{"auto-width":""})])),_:2},1032,["props"])])),body:(0,e.w5)((o=>[(0,e.Wm)(v,{props:o},{default:(0,e.w5)((()=>[(0,e.Wm)(y,{"auto-width":""},{default:(0,e.w5)((()=>[(0,e.Wm)(f,{size:"sm",color:"accent",round:"",dense:"",onClick:t=>o.expand=!o.expand,icon:o.expand?"remove":"add"},null,8,["onClick","icon"])])),_:2},1024),((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(o.cols,(t=>((0,e.wg)(),(0,e.j4)(y,{key:t.name,props:o},{default:(0,e.w5)((()=>[(0,e.Uk)((0,i.zw)(t.value),1)])),_:2},1032,["props"])))),128)),(0,e.Wm)(y,{"auto-width":""},{default:(0,e.w5)((()=>["stopped"===o.row.status?((0,e.wg)(),(0,e.j4)(f,{key:0,size:"sm",color:"positive",dense:"",onClick:n=>t.continueAlgo(o.row,o),label:"Continue"},null,8,["onClick"])):(0,e.kq)("",!0),"running"===o.row.status||"continued"===o.row.status?((0,e.wg)(),(0,e.j4)(f,{key:1,size:"sm",color:"negative",dense:"",onClick:n=>t.stopAlgo(o.row,o),label:"Stop"},null,8,["onClick"])):(0,e.kq)("",!0)])),_:2},1024),(0,e.Wm)(R,{showing:o.loading},{default:(0,e.w5)((()=>[(0,e.Wm)(k,{size:"1em",color:"primary"})])),_:2},1032,["showing"])])),_:2},1032,["props"]),(0,e.wy)((0,e.Wm)(v,{props:o},{default:(0,e.w5)((()=>[(0,e.Wm)(y,{colspan:"3",class:"content-start"},{default:(0,e.w5)((()=>[(0,e._)("div",c,[h,(0,e._)("pre",null,(0,i.zw)(JSON.stringify(JSON.parse(o.row.inputs),null,2)),1)])])),_:2},1024),(0,e.Wm)(y,{colspan:"3"},{default:(0,e.w5)((()=>[(0,e._)("div",m,[p,(0,e._)("pre",null,(0,i.zw)(JSON.stringify(JSON.parse(o.row.state),null,2)),1)])])),_:2},1024)])),_:2},1032,["props"]),[[l.F8,o.expand]])])),_:1},8,["rows","columns","loading"])])])}var w=n(3657),b=n(7363),f=n(1291),_=function(t,o,n,e){function i(t){return t instanceof n?t:new n((function(o){o(t)}))}return new(n||(n=Promise))((function(n,l){function s(t){try{r(e.next(t))}catch(o){l(o)}}function a(t){try{r(e["throw"](t))}catch(o){l(o)}}function r(t){t.done?n(t.value):i(t.value).then(s,a)}r((e=e.apply(t,o||[])).next())}))};const v=(0,e.aZ)({name:"AlgorithmRunsScreen",data(){return{algorithmRuns:[],loading:!1,columns:[{name:"id",sortable:!0,label:"id",field:t=>t.id},{name:"status",label:"status",field:t=>t.status},{name:"updated",sortable:!0,sortOrder:"da",label:"updated",field:t=>t.updated_at},{name:"started",sortable:!0,sortOrder:"da",label:"started",field:t=>t.created_at}]}},mixins:[w.y,w.I],methods:Object.assign(Object.assign({},(0,b.nv)(f.R,["getAlgorithmRuns","stopAlgorithm","continueAlgorithm"])),{fetch(){return _(this,void 0,void 0,(function*(){this.loading=!0;try{this.algorithmRuns=yield this.getAlgorithmRuns(this.robot,this.algorithm.name)}catch(t){this.algorithmRuns=[]}this.loading=!1}))},stopAlgo(t,o){return _(this,void 0,void 0,(function*(){o.loading=!0;try{const o=yield this.stopAlgorithm(this.robot,t.algorithm_name,t.id);this.updateRun(o)}catch(n){}o.loading=!1}))},continueAlgo(t,o){return _(this,void 0,void 0,(function*(){o.loading=!0;try{const o=yield this.continueAlgorithm(this.robot,t.algorithm_name,t.id);this.updateRun(o)}catch(n){}o.loading=!1}))},updateRun(t){const o=this.algorithmRuns.findIndex((o=>o.id===t.id));o>-1&&(this.algorithmRuns[o]=t)}}),mounted(){return _(this,void 0,void 0,(function*(){yield this.fetch()}))}});var y=n(1639),k=n(4455),R=n(3066),W=n(9546),A=n(1682),q=n(7220),x=n(854),z=n(5304),C=n(9984),Z=n.n(C);const O=(0,y.Z)(v,[["render",g]]),S=O;Z()(v,"components",{QBtn:k.Z,QTable:R.Z,QTr:W.Z,QTh:A.Z,QTd:q.Z,QInnerLoading:x.Z,QSpinnerBall:z.Z})}}]);