"use strict";(self["webpackChunktrade_bots_dashboard"]=self["webpackChunktrade_bots_dashboard"]||[]).push([[400],{4400:(t,e,o)=>{o.r(e),o.d(e,{default:()=>$});var n=o(9835);const a={class:"q-pa-md"},i=(0,n.Uk)(" Filters "),r={class:"q-mr-sm full-width col-sm"},s={class:"full-width col-sm"},u=(0,n.Uk)("Refresh"),l=(0,n.Uk)(" Parse");function d(t,e,o,d,c,p){const m=(0,n.up)("q-breadcrumbs-el"),h=(0,n.up)("q-breadcrumbs"),f=(0,n.up)("q-card-section"),g=(0,n.up)("q-date"),b=(0,n.up)("q-input"),y=(0,n.up)("q-space"),v=(0,n.up)("q-icon"),w=(0,n.up)("q-btn"),T=(0,n.up)("q-btn-group"),_=(0,n.up)("q-card"),k=(0,n.up)("q-table");return(0,n.wg)(),(0,n.iD)("div",a,[(0,n.Wm)(h,{class:"q-ma-md"},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{label:"Home",icon:"home",to:"/"}),(0,n.Wm)(m,{label:"Robots",icon:"widgets",to:"/robots"}),(0,n.Wm)(m,{label:t.robot.name,icon:"precision_manufacturing",to:`/robots/${t.robot.name}`},null,8,["label","to"]),(0,n.Wm)(m,{label:"Operations",icon:"pending_actions",class:"text-primary"})])),_:1}),(0,n.Wm)(_,{class:"q-mb-lg"},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{class:"text-h6"},{default:(0,n.w5)((()=>[i])),_:1}),(0,n.Wm)(f,{class:"row"},{default:(0,n.w5)((()=>[(0,n._)("div",r,[(0,n.Wm)(g,{modelValue:t.date,"onUpdate:modelValue":e[0]||(e[0]=e=>t.date=e),range:"","today-btn":"",subtitle:"Time range"},null,8,["modelValue"])]),(0,n._)("div",s,[(0,n.Wm)(b,{modelValue:t.securityTicker,"onUpdate:modelValue":e[1]||(e[1]=e=>t.securityTicker=e),label:"Security Ticker"},null,8,["modelValue"]),(0,n.Wm)(b,{modelValue:t.operationType,"onUpdate:modelValue":e[2]||(e[2]=e=>t.operationType=e),label:"Operation"},null,8,["modelValue"])])])),_:1}),(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[(0,n.Wm)(y),(0,n.Wm)(T,null,{default:(0,n.w5)((()=>[(0,n.Wm)(w,{color:"primary",onClick:e[3]||(e[3]=e=>t.fetch()),loading:t.loading},{default:(0,n.w5)((()=>[(0,n.Wm)(v,{name:"refresh"}),u])),_:1},8,["loading"]),(0,n.Wm)(w,{color:"secondary",onClick:e[4]||(e[4]=e=>t.updateOperationsLocal()),loading:t.updateLoading},{default:(0,n.w5)((()=>[(0,n.Wm)(v,{name:"system_update_alt"}),l])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1}),(0,n.Wm)(k,{rows:t.operations,"row-key":"created_at",loading:t.loading},null,8,["rows","loading"])])}var c=o(5619),p=o(7363),m=o(9981),h=o.n(m),f=function(t,e,o,n){function a(t){return t instanceof o?t:new o((function(e){e(t)}))}return new(o||(o=Promise))((function(o,i){function r(t){try{u(n.next(t))}catch(e){i(e)}}function s(t){try{u(n["throw"](t))}catch(e){i(e)}}function u(t){t.done?o(t.value):a(t.value).then(r,s)}u((n=n.apply(t,e||[])).next())}))};const g=(0,p.Q_)("operationsActions",{state:()=>({}),getters:{},actions:{getOperations(t,e){var o,n;return f(this,void 0,void 0,(function*(){const a=(null===(o=e.from)||void 0===o?void 0:o.toUTCString())||"",i=(null===(n=e.to)||void 0===n?void 0:n.toUTCString())||"",r=e.securityTicker||"",s=e.operation||"",{data:u}=yield h().get(`${t.url}/api/state/operations?from=${a}&to=${i}&securityTicker=${r}&operation=${s}`,{headers:t.authHeader});return u}))},updateOperations(t,e){var o,n;return f(this,void 0,void 0,(function*(){const a=(null===(o=e.from)||void 0===o?void 0:o.toUTCString())||"",i=(null===(n=e.to)||void 0===n?void 0:n.toUTCString())||"",{data:r}=yield h().post(`${t.url}/api/state/operations`,{from:a,to:i},{headers:t.authHeader});return r}))}}});var b=function(t,e,o,n){function a(t){return t instanceof o?t:new o((function(e){e(t)}))}return new(o||(o=Promise))((function(o,i){function r(t){try{u(n.next(t))}catch(e){i(e)}}function s(t){try{u(n["throw"](t))}catch(e){i(e)}}function u(t){t.done?o(t.value):a(t.value).then(r,s)}u((n=n.apply(t,e||[])).next())}))};const y=(0,n.aZ)({name:"OperationsScreen",data(){return{operations:[],loading:!1,updateLoading:!1,date:null,securityTicker:void 0,operationType:void 0}},mixins:[c.yY,c.bH],methods:Object.assign(Object.assign({},(0,p.nv)(g,["getOperations","updateOperations"])),{fetch(){return b(this,void 0,void 0,(function*(){this.loading=!0;try{const{from:t,to:e}=this.getDayBoundsFromTimeRange(this.date);this.operations=yield this.getOperations(this.robot,{from:t,to:e,operation:this.operationType,securityTicker:this.securityTicker})}catch(t){this.operations=[]}this.loading=!1}))},updateOperationsLocal(){return b(this,void 0,void 0,(function*(){this.updateLoading=!0;try{const{from:t,to:e}=this.getDayBoundsFromTimeRange(this.date);this.operations=yield this.updateOperations(this.robot,{from:t,to:e}),this.securityTicker="",this.operationType=""}catch(t){}this.updateLoading=!1}))}}),mounted(){return b(this,void 0,void 0,(function*(){yield this.fetch()}))}});var v=o(1639),w=o(2605),T=o(8052),_=o(4458),k=o(3190),W=o(2952),q=o(6611),O=o(136),Z=o(7236),Q=o(8879),C=o(2857),U=o(3066),V=o(9984),S=o.n(V);const x=(0,v.Z)(y,[["render",d]]),$=x;S()(y,"components",{QBreadcrumbs:w.Z,QBreadcrumbsEl:T.Z,QCard:_.Z,QCardSection:k.Z,QDate:W.Z,QInput:q.Z,QSpace:O.Z,QBtnGroup:Z.Z,QBtn:Q.Z,QIcon:C.Z,QTable:U.Z})}}]);