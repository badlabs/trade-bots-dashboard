"use strict";(self["webpackChunktrade_bots_dashboard"]=self["webpackChunktrade_bots_dashboard"]||[]).push([[48],{48:(e,t,o)=>{o.r(t),o.d(t,{default:()=>je});var n=o(9835),a=o(6970);const l={class:"q-pa-md"},r={class:"q-gutter-sm"},i={class:"row justify-between"};function u(e,t,o,u,s,d){const m=(0,n.up)("q-btn"),c=(0,n.up)("RobotLogsModal"),p=(0,n.up)("PortfolioStatistics"),h=(0,n.up)("AlgosList");return(0,n.wg)(),(0,n.iD)("div",l,[(0,n._)("div",r,[(0,n.Wm)(m,{color:"primary",to:"/robots",label:"< Robots"})]),(0,n._)("div",i,[(0,n._)("h4",null,"Robot "+(0,a.zw)(e.robot.name),1),(0,n._)("div",null,[(0,n.Wm)(c,{robot:e.robot},null,8,["robot"])])]),(0,n.Wm)(p,{robot:e.robot},null,8,["robot"]),(0,n.Wm)(h,{robot:e.robot},null,8,["robot"])])}var s=o(1623),d=o(7363),m=o(3260),c=o(1925);const p=(0,n.Uk)("Minimize"),h=(0,n.Uk)("Maximize"),g=(0,n.Uk)("Close"),w=(0,n.Uk)("Logs");function b(e,t,o,l,r,i){const u=(0,n.up)("q-space"),s=(0,n.up)("q-tooltip"),d=(0,n.up)("q-btn"),m=(0,n.up)("q-bar"),c=(0,n.up)("RobotLogs"),b=(0,n.up)("q-card"),f=(0,n.up)("q-dialog"),y=(0,n.Q2)("close-popup");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(f,{modelValue:e.show,"onUpdate:modelValue":t[2]||(t[2]=t=>e.show=t),persistent:"",maximized:e.maximizedToggle,"transition-show":"slide-up","transition-hide":"slide-down"},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{style:{"min-width":"400px"},class:"bg-black text-white"},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{class:"bg-primary"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Logs "+(0,a.zw)(e.robot.name)+" ",1),(0,n.Wm)(u),(0,n.Wm)(d,{dense:"",flat:"",icon:"minimize",onClick:t[0]||(t[0]=t=>e.maximizedToggle=!1),disable:!e.maximizedToggle},{default:(0,n.w5)((()=>[e.maximizedToggle?((0,n.wg)(),(0,n.j4)(s,{key:0,class:"bg-white text-primary"},{default:(0,n.w5)((()=>[p])),_:1})):(0,n.kq)("",!0)])),_:1},8,["disable"]),(0,n.Wm)(d,{dense:"",flat:"",icon:"crop_square",onClick:t[1]||(t[1]=t=>e.maximizedToggle=!0),disable:e.maximizedToggle},{default:(0,n.w5)((()=>[e.maximizedToggle?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(s,{key:0,class:"bg-white text-primary"},{default:(0,n.w5)((()=>[h])),_:1}))])),_:1},8,["disable"]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(d,{dense:"",flat:"",icon:"close"},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{class:"bg-white text-primary"},{default:(0,n.w5)((()=>[g])),_:1})])),_:1})),[[y]])])),_:1}),(0,n.Wm)(c,{style:{"max-width":"600px","max-height":"400px"},robot:e.robot},null,8,["robot"])])),_:1})])),_:1},8,["modelValue","maximized"]),(0,n.Wm)(d,{onClick:t[3]||(t[3]=t=>e.show=!e.show),color:"primary"},{default:(0,n.w5)((()=>[w])),_:1})],64)}var f=o(8693);const y=(0,n.aZ)({name:"RobotLogsModal",components:{RobotLogs:f.Z},props:{robot:{type:m.n,required:!0}},data(){return{show:!1,maximizedToggle:!0}}});var V=o(1639),_=o(7743),v=o(4458),q=o(4526),Z=o(136),k=o(4455),W=o(6858),x=o(2146),Q=o(9984),I=o.n(Q);const j=(0,V.Z)(y,[["render",b]]),C=j;I()(y,"components",{QDialog:_.Z,QCard:v.Z,QBar:q.Z,QSpace:Z.Z,QBtn:k.Z,QTooltip:W.Z}),I()(y,"directives",{ClosePopup:x.Z});const A=(0,n.Uk)(" Algorithms ");function D(e,t,o,a,l,r){const i=(0,n.up)("q-card-section"),u=(0,n.up)("AlgorithmItem"),s=(0,n.up)("q-list"),d=(0,n.up)("q-spinner-ball"),m=(0,n.up)("q-inner-loading"),c=(0,n.up)("q-card");return(0,n.wg)(),(0,n.j4)(c,{class:"q-pa-md q-my-lg q-mx-auto",style:{"max-width":"800px",background:"lightblue","border-radius":"5px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{class:"text-h3"},{default:(0,n.w5)((()=>[A])),_:1}),(0,n.Wm)(s,{style:{"max-height":"300px","overflow-y":"auto"},separator:""},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.algorithms,((t,o)=>((0,n.wg)(),(0,n.j4)(u,{key:o,robot:e.robot,algorithm:t,dense:""},null,8,["robot","algorithm"])))),128))])),_:1}),(0,n.Wm)(m,{showing:e.loading},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{size:"50px",color:"primary"})])),_:1},8,["showing"])])),_:1})}function U(e,t,o,l,r,i){const u=(0,n.up)("q-card-section"),s=(0,n.up)("q-item-section"),d=(0,n.up)("q-chip"),m=(0,n.up)("q-item-label"),c=(0,n.up)("q-item"),p=(0,n.up)("q-list"),h=(0,n.up)("RunAlgoModal"),g=(0,n.up)("q-card-actions"),w=(0,n.up)("q-card");return(0,n.wg)(),(0,n.j4)(c,{dense:""},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{class:"q-pa-sm q-my-sm"},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{class:"my-card",style:{"max-height":"300px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{class:"text-h5"},{default:(0,n.w5)((()=>[(0,n.Uk)("Algorithm "+(0,a.zw)(e.algorithm.name),1)])),_:1}),(0,n.Wm)(p,{separator:"",class:"bg-white"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.inputs,((e,t)=>((0,n.wg)(),(0,n.j4)(c,{key:t},{default:(0,n.w5)((()=>[(0,n.Wm)(s,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(t),1)])),_:2},1024),(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n._)("code",null,(0,a.zw)(e),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),(0,n.Wm)(g,{align:"right"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{robot:e.robot,algorithm:e.algorithm},null,8,["robot","algorithm"])])),_:1})])),_:1})])),_:1})])),_:1})}var O=o(1957);const T=(0,n.Uk)(" Start "),z=(0,n.Uk)("Cancel"),S=(0,n.Uk)("Run");function L(e,t,o,a,l,r){const i=(0,n.up)("q-input"),u=(0,n.up)("OrderOptionsInput"),s=(0,n.up)("DateTimeInput"),d=(0,n.up)("q-card-section"),m=(0,n.up)("q-btn"),c=(0,n.up)("q-card-actions"),p=(0,n.up)("q-form"),h=(0,n.up)("q-card"),g=(0,n.up)("q-dialog");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(g,{modelValue:e.show,"onUpdate:modelValue":t[1]||(t[1]=t=>e.show=t),persistent:""},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{style:{"min-width":"400px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{onSubmit:(0,O.iM)(e.startAlgo,["prevent"])},{default:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.fields,(e=>((0,n.wg)(),(0,n.iD)("div",{key:e.name},["number"===e.type?((0,n.wg)(),(0,n.j4)(i,{key:0,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,type:"number",label:e.name},null,8,["modelValue","onUpdate:modelValue","label"])):"OrderDetails"===e.type?((0,n.wg)(),(0,n.j4)(u,{key:1,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,label:e.name},null,8,["modelValue","onUpdate:modelValue","label"])):"string"===e.type?((0,n.wg)(),(0,n.j4)(i,{key:2,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,label:e.name},null,8,["modelValue","onUpdate:modelValue","label"])):"Date"===e.type?((0,n.wg)(),(0,n.j4)(s,{key:3,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,label:e.name},null,8,["modelValue","onUpdate:modelValue","label"])):(0,n.kq)("",!0)])))),128))])),_:1}),(0,n.Wm)(c,{align:"right"},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{color:"primary",type:"submit",loading:e.loading},{default:(0,n.w5)((()=>[T])),_:1},8,["loading"]),(0,n.Wm)(m,{color:"red",onClick:t[0]||(t[0]=t=>e.show=!e.show)},{default:(0,n.w5)((()=>[z])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"]),(0,n.Wm)(m,{onClick:t[2]||(t[2]=t=>e.show=!e.show),color:"primary"},{default:(0,n.w5)((()=>[S])),_:1})],64)}function R(e,t,o,l,r,i){const u=(0,n.up)("q-input"),s=(0,n.up)("q-select"),d=(0,n.up)("q-card-section"),m=(0,n.up)("q-card");return(0,n.wg)(),(0,n.j4)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d,{class:"row justify-between"},{default:(0,n.w5)((()=>[(0,n._)("div",null,(0,a.zw)(e.label||"OrderDetails"),1),(0,n._)("div",null,[(0,n.Wm)(u,{modelValue:e.currentValue.ticker,"onUpdate:modelValue":t[0]||(t[0]=t=>e.currentValue.ticker=t),label:"Ticker",onInput:e.input},null,8,["modelValue","onInput"]),(0,n.Wm)(s,{modelValue:e.currentValue.operation,"onUpdate:modelValue":t[1]||(t[1]=t=>e.currentValue.operation=t),options:e.operationTypes,label:"Operation",onInput:e.input},null,8,["modelValue","options","onInput"]),(0,n.Wm)(u,{modelValue:e.currentValue.price,"onUpdate:modelValue":t[2]||(t[2]=t=>e.currentValue.price=t),type:"number",label:"Price",onInput:e.input},null,8,["modelValue","onInput"]),(0,n.Wm)(u,{modelValue:e.currentValue.lots,"onUpdate:modelValue":t[3]||(t[3]=t=>e.currentValue.lots=t),type:"number",label:"Lots",onInput:e.input},null,8,["modelValue","onInput"])])])),_:1})])),_:1})}const M=(0,n.aZ)({name:"OrderOptionsInput",props:{label:String,modelValue:{type:Object,required:!0}},data(){return{currentValue:this.modelValue,operationTypes:["limit_buy","limit_sell","market_buy","market_sell","buy_or_cancel","sell_or_cancel"]}},methods:{input(){this.$emit("update:modelValue",this.currentValue)},onValueChange(e){this.currentValue=e,this.input()}},watch:{value(e){this.onValueChange(e)}}});var Y=o(3190),H=o(6611),P=o(6997);const $=(0,V.Z)(M,[["render",R]]),B=$;I()(M,"components",{QCard:v.Z,QCardSection:Y.Z,QInput:H.Z,QSelect:P.Z});var K=o(9981),E=o.n(K),F=function(e,t,o,n){function a(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,l){function r(e){try{u(n.next(e))}catch(t){l(t)}}function i(e){try{u(n["throw"](e))}catch(t){l(t)}}function u(e){e.done?o(e.value):a(e.value).then(r,i)}u((n=n.apply(e,t||[])).next())}))};const J=(0,d.Q_)("algorithmsActions",{state:()=>({}),getters:{},actions:{getAlgorithms(e){return F(this,void 0,void 0,(function*(){const{data:t}=yield E().get(`${e.url}/api/algos`,{headers:e.authHeader});return t}))},runAlgorithm(e,t,o){return F(this,void 0,void 0,(function*(){const{data:n}=yield E().post(`${e.url}/api/algos/${t}`,o,{headers:e.authHeader});return n}))},getAlgorithmInputsTypes(e){return JSON.parse(e.input_types)}}}),N={class:"row items-center justify-end"},G={class:"row items-center justify-end"};function X(e,t,o,a,l,r){const i=(0,n.up)("q-btn"),u=(0,n.up)("q-date"),s=(0,n.up)("q-popup-proxy"),d=(0,n.up)("q-icon"),m=(0,n.up)("q-time"),c=(0,n.up)("q-input"),p=(0,n.Q2)("close-popup");return(0,n.wg)(),(0,n.j4)(c,{modelValue:e.date,"onUpdate:modelValue":t[2]||(t[2]=t=>e.date=t),label:e.label},{prepend:(0,n.w5)((()=>[(0,n.Wm)(d,{name:"event",class:"cursor-pointer"},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{modelValue:e.date,"onUpdate:modelValue":t[0]||(t[0]=t=>e.date=t),mask:"YYYY-MM-DD HH:mm"},{default:(0,n.w5)((()=>[(0,n._)("div",N,[(0,n.wy)((0,n.Wm)(i,{label:"Close",color:"primary",flat:""},null,512),[[p]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),append:(0,n.w5)((()=>[(0,n.Wm)(d,{name:"access_time",class:"cursor-pointer"},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{modelValue:e.date,"onUpdate:modelValue":t[1]||(t[1]=t=>e.date=t),mask:"YYYY-MM-DD HH:mm",format24h:""},{default:(0,n.w5)((()=>[(0,n._)("div",G,[(0,n.wy)((0,n.Wm)(i,{label:"Close",color:"primary",flat:""},null,512),[[p]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue","label"])}const ee=(0,n.aZ)({name:"DateTimeInput",props:{label:String,modelValue:{type:Date,required:!0}},data(){return{currentValue:this.modelValue,date:this.modelValue}},methods:{input(){this.$emit("update:modelValue",this.currentValue)},onValueChange(e){this.currentValue=e,this.input()}},watch:{date(e){this.currentValue=new Date(this.date),this.input()},value(e){this.onValueChange(e)}}});var te=o(2857),oe=o(2765),ne=o(2952),ae=o(357);const le=(0,V.Z)(ee,[["render",X]]),re=le;I()(ee,"components",{QInput:H.Z,QIcon:te.Z,QPopupProxy:oe.Z,QDate:ne.Z,QBtn:k.Z,QTime:ae.Z}),I()(ee,"directives",{ClosePopup:x.Z});var ie=function(e,t,o,n){function a(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,l){function r(e){try{u(n.next(e))}catch(t){l(t)}}function i(e){try{u(n["throw"](e))}catch(t){l(t)}}function u(e){e.done?o(e.value):a(e.value).then(r,i)}u((n=n.apply(e,t||[])).next())}))};const ue=(0,n.aZ)({name:"RunAlgoModal",props:{algorithm:{type:Object,required:!0},robot:{type:m.n,required:!0}},components:{DateTimeInput:re,OrderOptionsInput:B},data(){return{show:!1,loading:!1,fields:[]}},methods:Object.assign(Object.assign({},(0,d.nv)(J,["runAlgorithm","getAlgorithmInputsTypes"])),{startAlgo(){return ie(this,void 0,void 0,(function*(){this.loading=!0;const e={};this.fields.forEach((t=>{e[t.name]=t.value})),yield this.runAlgorithm(this.robot,this.algorithm.name,e),this.loading=!1,this.show=!1}))}}),created(){const e=this.getAlgorithmInputsTypes(this.algorithm);this.fields=Object.keys(e).map((t=>{let o=e[t],n=0;switch(o){case"number":n=0;break;case"string":n="";break;case"Date":n=new Date;break;case"OrderDetails":n={lots:0,operation:"limit_buy",price:0,ticker:""}}return{name:t,type:o,value:n}}))}});var se=o(8326),de=o(1821);const me=(0,V.Z)(ue,[["render",L]]),ce=me;I()(ue,"components",{QDialog:_.Z,QCard:v.Z,QForm:se.Z,QCardSection:Y.Z,QInput:H.Z,QCardActions:de.Z,QBtn:k.Z});const pe=(0,n.aZ)({name:"AlgorithmItem",props:{algorithm:{type:Object,required:!0},robot:{type:m.n,required:!0}},components:{RunAlgoModal:ce},computed:{inputs(){return this.getAlgorithmInputsTypes(this.algorithm)}},methods:Object.assign({},(0,d.nv)(J,["getAlgorithmInputsTypes"]))});var he=o(490),ge=o(1233),we=o(3246),be=o(3115),fe=o(7691);const ye=(0,V.Z)(pe,[["render",U]]),Ve=ye;I()(pe,"components",{QItem:he.Z,QItemSection:ge.Z,QCard:v.Z,QCardSection:Y.Z,QList:we.Z,QItemLabel:be.Z,QChip:fe.Z,QCardActions:de.Z});var _e=function(e,t,o,n){function a(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,l){function r(e){try{u(n.next(e))}catch(t){l(t)}}function i(e){try{u(n["throw"](e))}catch(t){l(t)}}function u(e){e.done?o(e.value):a(e.value).then(r,i)}u((n=n.apply(e,t||[])).next())}))};const ve=(0,n.aZ)({name:"AlgosList",props:{robot:{type:m.n,required:!0}},data(){return{algorithms:[],loading:!1}},methods:Object.assign({},(0,d.nv)(J,["getAlgorithms"])),components:{AlgorithmItem:Ve},mounted(){return _e(this,void 0,void 0,(function*(){this.loading=!0,this.algorithms=yield this.getAlgorithms(this.robot),this.loading=!1}))}});var qe=o(854),Ze=o(5304);const ke=(0,V.Z)(ve,[["render",D]]),We=ke;I()(ve,"components",{QCard:v.Z,QCardSection:Y.Z,QList:we.Z,QInnerLoading:qe.Z,QSpinnerBall:Ze.Z});var xe=function(e,t,o,n){function a(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,l){function r(e){try{u(n.next(e))}catch(t){l(t)}}function i(e){try{u(n["throw"](e))}catch(t){l(t)}}function u(e){e.done?o(e.value):a(e.value).then(r,i)}u((n=n.apply(e,t||[])).next())}))};const Qe=(0,n.aZ)({name:"RobotScreen",components:{PortfolioStatistics:c.Z,AlgosList:We,RobotLogsModal:C},data(){return{}},computed:Object.assign(Object.assign({},(0,d.rn)(s.V,["robots"])),{robot(){const e=this.robots.find((e=>e.name===this.$route.params.robot));return e||(this.$router.push("/"),new m.n({name:"",host:"",port:0,token:""}))}}),methods:Object.assign(Object.assign({},(0,d.nv)(J,["getAlgorithms"])),{updateRobotData(){return xe(this,void 0,void 0,(function*(){}))}}),watch:{robot(){this.updateRobotData()}},created(){this.updateRobotData()}}),Ie=(0,V.Z)(Qe,[["render",u]]),je=Ie;I()(Qe,"components",{QBtn:k.Z})}}]);